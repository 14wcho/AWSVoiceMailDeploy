(this["webpackJsonpaws-connect-vm-portal"]=this["webpackJsonpaws-connect-vm-portal"]||[]).push([[0],{1181:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),o=n.n(i),l=n(100),c=n(10),s=n(13),u=n(18),h=n(189),d=n.n(h),p=n(64),m=function e(t){Object(s.a)(this,e),this.idToken=void 0,this.accessToken=void 0,this.refreshToken=void 0,this.idToken=t.idToken,this.accessToken=t.accessToken,this.refreshToken=t.refreshToken},g="POST",f="GET",v="PATCH",b=function(){function e(){Object(s.a)(this,e),this.baseUrl="__BASE_API__",this.apiKey="__API_KEY__"}return Object(u.a)(e,[{key:"getAgents",value:function(e){return this.request(f,"".concat(this.baseUrl,"/agents"),{next:e},this.getAuth())}},{key:"getGlobalSettings",value:function(){return this.request(f,"".concat(this.baseUrl,"/global/settings"),null,this.getAuth()).then((function(e){return e.settings}))}},{key:"getContactFlow",value:function(e){return this.request(g,"".concat(this.baseUrl,"/contact/flow"),e,this.getAuth()).then((function(e){return e.contactFlow}))}},{key:"syncAgent",value:function(){return this.request(g,"".concat(this.baseUrl,"/agents/sync"),null,this.getAuth())}},{key:"updateAgentSettings",value:function(e,t){return this.request(g,"".concat(this.baseUrl,"/agents/").concat(e),t,this.getAuth()).then((function(e){return e.agent}))}},{key:"getAgent",value:function(e){return this.request(f,"".concat(this.baseUrl,"/agents/").concat(e),null,this.getAuth())}},{key:"saveGlobalSettings",value:function(e){return this.request(g,"".concat(this.baseUrl,"/global/settings"),e,this.getAuth()).then((function(e){return e.settings}))}},{key:"_getHeader",value:function(e){var t={"x-api-key":this.apiKey};return e&&(t.Authorization="Bearer ".concat(e.idToken)),t}},{key:"getAuth",value:function(){return p.a.currentSession().then((function(e){return new m({idToken:e.getIdToken().getJwtToken(),accessToken:e.getAccessToken().getJwtToken(),refreshToken:e.getRefreshToken().getToken()})}))}},{key:"request",value:function(e,t,n){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Promise.resolve(null);return e===g?r.then((function(e){return a._post(t,n,e)})):e===f?r.then((function(e){return a._get(t,n,e)})):e===v?r.then((function(e){return a._patch(t,n,e)})):Promise.resolve()}},{key:"_post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:g,uri:e,body:t,headers:this._getHeader(n),json:!0};return d()(a)}},{key:"_get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:f,uri:e,qs:t,headers:this._getHeader(n),json:!0};return d()(a)}},{key:"_patch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:v,uri:e,body:t,headers:this._getHeader(n),json:!0};return d()(a)}}]),e}(),E=new(function(){function e(t){Object(s.a)(this,e),this.apiService=void 0,this.apiService=t}return Object(u.a)(e,[{key:"logout",value:function(){p.a.signOut()}}]),e}())(new b),y="LOGIN_PENDING",O="LOGIN",S="LOGOUT",w="LOGIN_ERROR",C=function(e){return function(t){var n=e.getSignInUserSession().getIdToken().decodePayload();t(function(e,t){return{type:O,value:{isAuthenticated:e,user:t}}}(!0,{email:n.email,roles:n["cognito:groups"]}))}},j=function(){return function(e){E.logout()}},A={loading:!1,loginError:null,isAuthenticated:!1,changePassword:!1,user:{email:"",roles:[]}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(c.a)(Object(c.a)({},e),{},{loading:t.value});case w:var n=e.changePassword||!1,a=t.value.error;return!n&&a&&(n="NewPasswordRequired"===a.error._error.name),Object(c.a)(Object(c.a)({},e),{},{changePassword:n,loginError:a});case O:return Object(c.a)(Object(c.a)({},e),{},{isAuthenticated:!0,changePassword:!1,user:t.value.user});case S:return Object(c.a)(Object(c.a)({},e),{},{changePassword:!1,isAuthenticated:!1,user:null});default:return e}},k=n(128),_=n(55),x=n.n(_),M=n(87),T=function(){function e(t,n,a,r,i,o,l,c,u,h,d,p,m){Object(s.a)(this,e),this.userId=t,this.username=n,this.firstName=a,this.lastName=r,this.email=i,this.phoneType=o,this.phoneNumber=l,this.extension=c,this.encryptVoicemail=u,this.transcribeVoicemail=h,this.deliverSMS=d,this.deliverSMSPhoneNumber=p,this.deliverEmail=m}return Object(u.a)(e,null,[{key:"fromAgent",value:function(t){return new this(t.userId,t.connectUser.username,t.connectUser.firstName,t.connectUser.lastName,t.connectUser.email,e.phoneTypeToDisplayString(t.connectUser.phoneType),t.connectUser.deskPhoneNumber,t.agent.extension,t.agent.encryptVoicemail||!1,t.agent.transcribeVoicemail||!1,t.agent.deliveryOptions.sms.enabled||!1,t.agent.deliveryOptions.sms.phoneNumber,t.agent.deliveryOptions.email||!1)}},{key:"fromBasicAgent",value:function(e){var t=(e.deliveryOptions||{}).sms||{},n=e.deliveryOptions||{};return new this(e.userId,e.username,"","","","","",e.extension,e.encryptVoicemail||!1,e.transcribeVoicemail||!1,t.enabled||!1,t.phoneNumber,n.email||!1)}},{key:"phoneTypeToDisplayString",value:function(e){switch(e){case"SOFT_PHONE":return"Soft Phone";case"DESK_PHONE":return"Desk Phone";default:return""}}}]),e}(),I=function e(t,n,a,r,i,o){Object(s.a)(this,e),this.extension=void 0,this.deliverSMSPhoneNumber=void 0,this.deliverSMS=void 0,this.deliverEmail=void 0,this.encryptVoicemail=void 0,this.transcribeVoicemail=void 0,this.extension=t||"",this.deliverSMSPhoneNumber=n||"",this.deliverSMS=a||!1,this.deliverEmail=r||!1,this.encryptVoicemail=i||!1,this.transcribeVoicemail=o||!1},F=function e(t,n,a){Object(s.a)(this,e),this.data=t,this.next=n,this.current=a},P=new(function(){function e(t){Object(s.a)(this,e),this.apiService=void 0,this.apiService=t}return Object(u.a)(e,[{key:"getAgents",value:function(e){return this.apiService.getAgents(e).then((function(t){return new F(t.data.map((function(e){return T.fromBasicAgent(e)})),t.next,e)}))}},{key:"updateAgent",value:function(e,t,n,a,r,i,o){var l=new I(t,n,a,r,i,o);return this.apiService.updateAgentSettings(e,l).then((function(e){return T.fromAgent(e)}))}},{key:"getAgent",value:function(e){return this.apiService.getAgent(e).then((function(e){return T.fromAgent(e)}))}},{key:"syncAgent",value:function(){var e=Object(M.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.apiService.syncAgent());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())(new b),V="LOADING",D="GET_AGENTS",R="SORT_AGENTS",L="FILTER_AGENTS",G="SHOW_AGENT",B="UPDATE_IN_PROGRESS",U="UPDATE_AGENT",K="UPDATE_AGENT_ERROR",W="firstName",z="lastName",q="email",H="extension",J="asc",Q="desc",Y=function(e){return{type:V,value:e}},X=function(e){return{type:D,value:e}},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:G,value:{showAgentSettings:e,agent:t}}},Z=function(e){return{type:B,value:e}},ee=function(e){return{type:K,value:e}},te=function(){var e=Object(M.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y(!0)),e.prev=1,e.next=4,P.getAgents(n);case 4:a=e.sent,t(X(a)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,t(Y(!1)),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(M.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.syncAgent();case 2:return e.abrupt("return",te(t,null));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){return function(){var e=Object(M.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ne(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},re=function(e){return function(t){return te(t,e)}},ie=function(e,t,n,a,r,i,o){return function(l){l(Z(!0)),l(ee(null)),P.updateAgent(e,t,n,a,r,i,o).then((function(e){l(function(e){return{type:U,value:{agent:e}}}(e)),l($(!1))})).catch((function(e){l(ee(e))})).finally((function(){l(Z(!1))}))}},oe=function(e,t){return function(n){return n(function(e,t){return{type:R,value:{sortKey:e,sortOrder:t}}}(e,t))}},le=function(e){return function(t){return t(function(e){return{type:L,value:e}}(e))}},ce=function(e,t){return function(){var n=Object(M.a)(x.a.mark((function n(a){var r;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t){n.next=5;break}a($(e,t)),a(ee(null)),n.next=15;break;case 5:return n.prev=5,n.next=8,P.getAgent(t.userId);case 8:r=n.sent,a($(e,r)),a(ee(null)),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(5);case 15:case"end":return n.stop()}}),n,null,[[5,13]])})));return function(e){return n.apply(this,arguments)}}()},se={loading:!1,agentList:[],sortKey:W,sortOrder:J,filter:"",agents:[],showAgentSettings:!1,agent:null,updateInProgress:!1,updateError:null,page:{next:[],prev:[],current:null}};function ue(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.filter((function(e){return(e.firstName||"").toLowerCase().includes(a.toLowerCase())||(e.lastName||"").toLowerCase().includes(a.toLowerCase())||(e.username||"").toLowerCase().includes(a.toLowerCase())||(e.email||"").toLowerCase().includes(a.toLowerCase())||(e.extension||"").includes(a.toLowerCase())})).sort((function(e,a){switch(t){case W:return n===J?e.firstName>a.firstName?1:-1:e.firstName<a.firstName?1:-1;case z:return n===J?e.lastName>a.lastName?1:-1:e.lastName<a.lastName?1:-1;case q:return n===J?e.email>a.email?1:-1:e.email<a.email?1:-1;case H:return n===J?e.extension>a.extension?1:-1:e.extension<a.extension?1:-1;default:return n===J?e.firstName>a.firstName?1:-1:e.firstName<a.firstName?1:-1}}))}var he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:var n=ue(t.value.data,e.sortKey,e.sortOrder),a={next:Object(k.a)(e.page.next),current:t.value.current,prev:Object(k.a)(e.page.prev)};return a.next.length&&a.next[0]===t.value.current?(a.next.shift(),a.prev.push(e.page.current)):e.page.prev.length&&e.page.prev[e.page.prev.length-1]===t.value.current&&(a.next.unshift(e.page.current),a.prev.pop()),t.value.next&&!a.next.length&&a.next.push(t.value.next),Object(c.a)(Object(c.a)({},e),{},{agentList:n,agents:n,page:a});case R:return Object(c.a)(Object(c.a)({},e),{},{sortKey:t.value.sortKey,sortOrder:t.value.sortOrder,agents:ue(Object(k.a)(e.agentList),t.value.sortKey,t.value.sortOrder,e.filter)});case L:return Object(c.a)(Object(c.a)({},e),{},{filter:t.value,agents:ue(Object(k.a)(e.agentList),e.sortKey,e.sortOrder,t.value)});case V:return Object(c.a)(Object(c.a)({},e),{},{loading:t.value});case G:return Object(c.a)(Object(c.a)({},e),{},{agent:t.value.agent||Object.assign({},e.agent),showAgentSettings:t.value.showAgentSettings});case U:var r=Object(k.a)(e.agents),i=r.findIndex((function(e){return e.userId===t.value.agent.userId}));return void 0!==i&&(r[i]=t.value.agent),Object(c.a)(Object(c.a)({},e),{},{agentList:r,agents:ue(r,e.sortKey,e.sortOrder,e.filter)});case B:return Object(c.a)(Object(c.a)({},e),{},{updateInProgress:t.value});case K:var o=null;return t.value&&(o=t.value.error._error.message),Object(c.a)(Object(c.a)({},e),{},{updateError:o});default:return e}},de=new(function(){function e(t){Object(s.a)(this,e),this.apiService=void 0,this.apiService=t}return Object(u.a)(e,[{key:"getSettings",value:function(){return this.apiService.getGlobalSettings()}},{key:"saveSettings",value:function(e){return this.apiService.saveGlobalSettings(e)}}]),e}())(new b),pe="SHOW_MODAL",me="LOADING",ge="SAVE_IN_PROGRESS",fe="SAVE_SETTINGS",ve="FETCH_SETTINGS",be=function(e){return{type:me,value:e}},Ee=function(e){return console.log("Saving",e),{type:ge,value:e}},ye=function(e){return function(t){t(function(e){return{type:pe,value:e}}(e))}},Oe=function(){return function(e){e(be(!0)),de.getSettings().then((function(t){e(function(e){return{type:ve,value:Object(c.a)({},e)}}(t))})).catch((function(e){console.log(e)})).finally((function(){e(be(!1))}))}},Se=function(e){return function(t){t(Ee(!0)),de.saveSettings(e).then((function(e){t(function(e){return{type:fe,value:Object(c.a)({},e)}}(e))})).catch((function(e){console.log(e)})).finally((function(){t(Ee(!1))}))}},we={showModal:!1,transcribeVoicemail:!1,encryptVoicemail:!1,deliveryEmail:"",loading:!1,saving:!1,availableSMSCountries:["us"]},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(c.a)(Object(c.a)({},e),{},{showModal:t.value});case ve:return Object(c.a)(Object(c.a)({},e),t.value);case me:return Object(c.a)(Object(c.a)({},e),{},{loading:t.value});case fe:return Object(c.a)(Object(c.a)({},e),t.value);case ge:return Object(c.a)(Object(c.a)({},e),{},{saving:t.value});default:return e}},je="application/json",Ae=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=document.createElement("a");return r.href="data:".concat(e,";charset=").concat(t,",").concat(n),r.download=a,r.click(),r}}]),e}(),Ne=function(){function e(t,n){Object(s.a)(this,e),this.apiService=void 0,this.fileSaver=void 0,this.apiService=t,this.fileSaver=n}return Object(u.a)(e,[{key:"downloadContactFlow",value:function(e){var t=this;return this.apiService.getContactFlow(e).then((function(e){return t.handleMultipleFlows(e)}))}},{key:"handleMultipleFlows",value:function(e){this.saveAsJson(e[0].metadata.name,e[0]),this.saveAsJson(e[1].metadata.name,e[1])}},{key:"saveAsJson",value:function(e,t){return this.fileSaver.save(je,"utf-8",encodeURI(JSON.stringify(t)),e)}}]),e}(),ke=new Ae,_e=new Ne(new b,ke),xe="SHOW_CONTACT_FLOW_MODAL",Me="DOWNLOADING",Te="DOWNLOAD",Ie="DOWNLOAD_ERROR",Fe=function(e){return{type:Ie,value:e}},Pe=function(e){return{type:Me,value:e}},Ve=function(e){return function(t){t(Fe(null)),t(Pe(!0)),_e.downloadContactFlow(e).then((function(e){t(function(e){return{type:Te,value:{contactFlow:e}}}(e))})).catch((function(e){t(Fe(e))})).finally((function(){t(Pe(!1))}))}},De=function(e){return function(t){t(function(e){return{type:xe,value:e}}(e))}},Re={showModal:!1,downloading:!1,downloadError:null},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(c.a)(Object(c.a)({},e),{},{downloading:t.value});case Ie:var n=null;return t.value&&t.value.error&&(n=t.value.error._error.message),Object(c.a)(Object(c.a)({},e),{},{downloadError:n});case xe:return Object(c.a)(Object(c.a)({},e),{},{showModal:t.value});default:return e}},Ge=Object(l.c)({auth:N,agents:he,globalSettings:Ce,contactFlow:Le}),Be=n(40),Ue=n(421),Ke=n(1222),We=n(427),ze={mediumGray:"#757679",primary:"#3D4E62",turquoise:"#00ABBA",error:"#C22402",navBar:"#222A33"},qe=new We.a({spacing:2,typography:{fontFamily:["Roboto","Helvetica","Arial","sans-serif"].join(",")},colors:{mediumGray:ze.mediumGray,error:ze.error},palette:{primary:{main:ze.primary},secondary:{main:ze.turquoise},error:{main:ze.error}},boxShadow:{high:"3px 8px 20px -6px rgba(0,0,0,0.35)",medium:"2px 6px 10px -4px rgba(0,0,0,0.35)",low:"1px 4px 8px -3px rgba(0,0,0,0.35)"},overrides:{MuiTableCell:{stickyHeader:{backgroundColor:ze.primary},head:{color:"#FFFFFF"}},MuiTableSortLabel:{active:{color:"#FFFFFF !important"},icon:{color:"#FFFFFF !important"}}},infoCaption:{color:"#757575",fontSize:12},modal:{root:{padding:5},title:{fontSize:25,padding:0,margin:0},paper:{padding:20,width:300},inputsContainer:{marginTop:20},padTop:{marginTop:20},error:{fontSize:12,color:ze.error}}}),He=n(27),Je=n(26),Qe=n(1246),Ye=n(7),Xe=n(83),$e=Object(Xe.a)(),Ze=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),p.b.listen("auth",(function(e){switch(e.payload.event){case"signIn":$e.push("/agents"),a.setState({authState:"signedIn",authData:e.payload.data})}})),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.location&&this.props.location.search.startsWith("?code=")||p.a.currentAuthenticatedUser().then((function(e){$e.push("/agents")})).catch((function(e){p.a.federatedSignIn()}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"})}}]),n}(a.Component),et=n(1223),tt=n(1224),nt=n(1225),at=n(257),rt=n(1219),it=n(1226),ot=n(1221),lt=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleButtonClick=function(){!1===e.props.showGlobalSettingsModal?e.props.showSettingsModal(!0):e.props.showSettingsModal(!1)},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(rt.a,{color:"inherit",onClick:this.handleButtonClick},r.a.createElement(ot.a,null))}}]),n}(a.Component),ct=Object(Be.b)((function(e){return{showGlobalSettingsModal:e.globalSettings.showModal}}),(function(e){return{showSettingsModal:function(t){return e(ye(t))}}}))(lt),st={ADMIN:"Admin",MANAGER:"Manager"},ut=new We.a({palette:{primary:{main:ze.navBar}}}),ht=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleOnLogout=function(){e.props.logout()},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Ke.a,{theme:ut},r.a.createElement("div",{className:e.root},r.a.createElement(et.a,{position:"static"},r.a.createElement(tt.a,null,r.a.createElement(nt.a,{container:!0,direction:"row",justify:"space-between",alignContent:"center",alignItems:"center"},r.a.createElement(nt.a,{item:!0},r.a.createElement(nt.a,{container:!0,direction:"row",alignItems:"center",alignContent:"center"},r.a.createElement(nt.a,{item:!0},r.a.createElement("img",{alt:"Amazon Connect Logo",className:e.logo,src:"/images/logo80_2x.png"})),r.a.createElement(nt.a,{item:!0},r.a.createElement(at.a,{variant:"h5"},"Amazon Connect Voicemail Management Portal")))),r.a.createElement(nt.a,{item:!0},r.a.createElement(nt.a,{container:!0,direction:"row"},r.a.createElement(nt.a,{item:!0,className:e.userInfo},r.a.createElement(nt.a,{container:!0,direction:"column",alignContent:"center",alignItems:"flex-end"},r.a.createElement(nt.a,{item:!0},r.a.createElement("p",{className:e.role},this.props.userRole)),r.a.createElement(nt.a,{item:!0},r.a.createElement("p",{className:e.email},this.props.userEmail)))),r.a.createElement(nt.a,{item:!0},r.a.createElement(nt.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement(nt.a,{item:!0},r.a.createElement(ct,null)),r.a.createElement(nt.a,{item:!0},r.a.createElement(rt.a,{color:"inherit",onClick:this.handleOnLogout},r.a.createElement(it.a,null))))))))))))}}]),n}(a.Component),dt=Object(Be.b)((function(e){var t="";if(!e.auth.user)return{userEmail:null,userRole:null};var n=e.auth.user.roles;return n&&n.includes(st.MANAGER)&&(t="Manager"),n&&n.includes(st.ADMIN)&&(t="Administrator"),{userEmail:e.auth.user.email,userRole:t}}),(function(e){return{logout:function(){return e(j())}}}))(Object(Ye.a)((function(e){return{root:{flexGrow:1},logo:{margin:"5px 10px 0 0",height:43},grow:{flexGrow:1},userInfo:{marginRight:10},role:{fontSize:12,textAlign:"right",fontWeight:"bold",margin:"4px 0 -2px 0",paddingTop:3},email:{fontSize:12,fontWeight:"light",textAlign:"right",margin:"-2px 0 0 0",padding:0}}}))(ht)),pt=n(408),mt=n(429),gt=n(1236),ft=n(1237),vt=n(1238),bt=n(1239),Et=n(1248),yt=n(1241),Ot=n(1240),St=n(1242),wt=n(1243),Ct=n(1244),jt=n(1227),At=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.props,n=t.color,a=t.onClick,i=t.className,o=t.disabled,l=t.type;return r.a.createElement(pt.a,{type:l||"button",color:n,onClick:a,disabled:o||this.props.loading,className:i,variant:"contained"},r.a.createElement("span",{className:e.span},this.props.children," ",this.props.loading?r.a.createElement(jt.a,{className:e.progress,color:"secondary",size:"1rem"}):null," "))}}]),n}(a.Component),Nt=Object(Ye.a)((function(e){return{progress:{marginLeft:5,verticalAlign:"sub"}}}))(At),kt=n(1228),_t=n(1230),xt=n(412),Mt=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSearchChange=function(e){a.updateSearch(e.target.value)},a.state={searchValue:""},a}return Object(u.a)(n,[{key:"updateSearch",value:function(e){var t=this;this.setState(Object(c.a)(Object(c.a)({},this.state),{},{searchValue:e}),(function(){t.props.searchChangeFunc&&t.props.searchChangeFunc(t.state.searchValue)}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(nt.a,{container:!0,direction:"row",alignItems:"flex-end",alignContent:"center"},r.a.createElement(kt.a,{className:t.search}),r.a.createElement(nt.a,{item:!0},r.a.createElement(xt.a,{className:t.textField,placeholder:"Search",name:"search",value:this.state.searchValue,onChange:this.handleSearchChange})),this.props.showClearButton?r.a.createElement(_t.a,{className:t.clearSearch,onClick:function(){e.updateSearch("")}}):null)}}]),n}(a.Component),Tt=Object(Ye.a)((function(e){return{textField:{width:220},search:{marginRight:5},clearSearch:{width:18,marginBottom:3,marginLeft:-15,color:"rgba(0,0,0,0.25)","&:hover":{cursor:"pointer"},zIndex:1}}}))(Mt),It=n(1231),Ft=n(1235),Pt=n(1233),Vt=n(1234),Dt=n(1232),Rt=[{id:"username",numeric:!1,disablePadding:!1,label:"Username",sortable:!0},{id:"extension",numeric:!1,disablePadding:!1,label:"Extension",sortable:!0},{id:"encrypt",numeric:!1,disablePadding:!1,label:"Encrypt",sortable:!1},{id:"transcribe",numeric:!1,disablePadding:!1,label:"Transcribe",sortable:!1},{id:"deliveryOptions",numeric:!1,disablePadding:!1,label:"Delivery Options",sortable:!1}],Lt=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).sortBy=function(e){console.log("Should Sort",e),Rt.filter((function(t){return t.id===e}))[0].sortable&&a.props.sortAgents(e,a.props.sortOrder===J?Q:J)},a.handleSearchChange=function(e){a.props.filterAgents(e)},a.showAgent=function(e){a.props.showAgentModal(!0,e)},a.handleSync=function(){a.setState({syncOpen:!1}),a.props.syncAgents()},a.sortKey="firstName",a.sortOrder="desc",a.searchTextField=null,a.state={syncOpen:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getAgents(),this.props.fetchGlobalSettings()}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:this.props.className},r.a.createElement(mt.a,{className:t.root},r.a.createElement("div",{className:t.topBar},r.a.createElement(nt.a,{container:!0,justify:"space-between",alignItems:"flex-end",direction:"row"},r.a.createElement(nt.a,{item:!0,className:t.searchBox},r.a.createElement(Tt,{ref:function(t){return e.searchTextField=t},showClearButton:""!==this.props.searchFilter,searchChangeFunc:this.handleSearchChange})),r.a.createElement(nt.a,{item:!0},r.a.createElement(pt.a,{color:"secondary",className:t.syncButton,onClick:function(){return e.setState({syncOpen:!0})}},"Sync Agents"),r.a.createElement(Nt,{loading:this.props.loading,color:"primary",onClick:function(){e.props.getAgents(),e.searchTextField&&e.searchTextField.updateSearch("")}},"Refresh")))),r.a.createElement(It.a,{open:this.state.syncOpen,onClose:function(){return e.setState({syncOpen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Dt.a,{id:"alert-dialog-title"},"Sync Amazon Connect Agents?"),r.a.createElement(Pt.a,null,r.a.createElement(Vt.a,{id:"alert-dialog-description"},"This process will sync all users in Amazon Connect to the VM portal.")),r.a.createElement(Ft.a,null,r.a.createElement(pt.a,{onClick:function(){return e.setState({syncOpen:!1})},color:"primary"},"Cancel"),r.a.createElement(pt.a,{onClick:this.handleSync,color:"primary",autoFocus:!0},"Sync"))),r.a.createElement(gt.a,{className:t.table,stickyHeader:!0,"aria-label":"sticky table",size:"small"},r.a.createElement(ft.a,null,r.a.createElement(vt.a,null,Rt.map((function(n){return r.a.createElement(bt.a,{className:t.tableCell,key:n.id,align:n.numeric?"right":"left",padding:n.disablePadding?"none":"default"},r.a.createElement(Et.a,{onClick:function(){return e.sortBy(n.id)},key:n.id,hideSortIcon:!n.sortable,active:e.props.sortKey===n.id,direction:e.props.sortOrder,IconComponent:Ot.a},n.label))})))),r.a.createElement(yt.a,null,this.props.agents.map((function(n){return r.a.createElement(vt.a,{key:n.userId,hover:!0,onClick:function(){e.showAgent(n)}},r.a.createElement(bt.a,{align:"left"},n.username),r.a.createElement(bt.a,{align:"left"},n.extension),r.a.createElement(bt.a,{align:"left"},e.props.encryptVoicemail||n.encryptVoicemail?r.a.createElement(St.a,{fontSize:"inherit"}):null),r.a.createElement(bt.a,{align:"left"},n.transcribeVoicemail?r.a.createElement(St.a,{className:e.props.transcribeVoicemail?null:t.checkDisable,fontSize:"inherit"}):null),r.a.createElement(bt.a,{align:"left"},r.a.createElement("span",{className:t.delivery},n.deliverEmail?"Email":""),r.a.createElement("span",{className:t.delivery},n.deliverSMS?"SMS: ".concat(n.deliverSMSPhoneNumber):"")))})))),r.a.createElement("div",{className:t.navigationBar},r.a.createElement(pt.a,{disabled:0===this.props.page.prev.length,onClick:function(){e.props.getAgents(e.props.page.prev[e.props.page.prev.length-1])}},r.a.createElement(wt.a,{className:t.navButton})),r.a.createElement(pt.a,{disabled:0===this.props.page.next.length,onClick:function(){e.props.getAgents(e.props.page.next[0])}},r.a.createElement(Ct.a,{className:t.navButton})))))}}]),n}(a.Component),Gt=Object(Be.b)((function(e){return{agents:e.agents.agents,loading:e.agents.loading,sortKey:e.agents.sortKey,sortOrder:e.agents.sortOrder,searchFilter:e.agents.filter,transcribeVoicemail:e.globalSettings.transcribeVoicemail,encryptVoicemail:e.globalSettings.encryptVoicemail,page:e.agents.page}}),(function(e){return{getAgents:function(t){return e(re(t))},sortAgents:function(t,n){return e(oe(t,n))},filterAgents:function(t){return e(le(t))},showAgentModal:function(t,n){return e(ce(t,n))},fetchGlobalSettings:function(){return e(Oe())},syncAgents:function(){return e(ae())}}}))(Object(Ye.a)((function(e){return{"@global":{".MuiTableSortLabel-root":{"&:hover":{color:"#FFFFFF"},"&:focus":{color:"#FFFFFF"}},".MuiTableCell-head":{fontWeight:150}},topBar:{margin:15},search:{marginRight:5},root:{width:"100%",overflowX:"auto"},table:{minWidth:650},delivery:{marginRight:10},tableCell:{borderRight:"1px solid white"},clearSearch:{width:15,marginBottom:3,marginLeft:-15,color:"rgba(0,0,0,0.25)","&:hover":{cursor:"pointer"},zIndex:1},checkDisable:{color:"#e2e2e2"},navigationBar:{float:"right"},navButton:{},syncButton:{margin:"0 10px 0 0"}}}))(Lt)),Bt=n(1191),Ut=n(430),Kt=n(78),Wt=n(1245),zt=n(1247),qt=n(1229),Ht=n(1249),Jt=n(1190),Qt=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleDownload=function(){var e={welcomeMessage:a.state.welcomeMessage,defaultErrorMessage:a.state.defaultErrorMessage,maxVoicemailDuration:a.state.maxVoicemailDuration,durationType:"SECOND",fallbackQueueName:a.state.fallbackQueueName,errorLoopCount:a.state.errorLoopCount};a.props.download(e)},a.handleInputChange=function(e){e.preventDefault(),a.setState(Object(c.a)(Object(c.a)({},a.state),{},Object(Kt.a)({},e.target.name,e.target.value)))},a.state={welcomeMessage:"Welcome",defaultErrorMessage:"Thank you and have a wonderful day",maxVoicemailDuration:60,durationType:"SECOND",fallbackQueueName:"BasicQueue",errorLoopCount:3},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement("h6",{className:e.title},"Generate Contact Flow"),r.a.createElement(nt.a,{className:e.inputsContainer,container:!0,direction:"column"},r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{type:"text",htmlFor:"welcome-message"},"Welcome Message"),r.a.createElement(Jt.a,{id:"welcome-message",disableUnderline:!0,readOnly:!1,name:"welcomeMessage",value:this.state.welcomeMessage,onChange:this.handleInputChange})),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"fallback-queue-name"},"Fallback Queue"),r.a.createElement(Jt.a,{id:"fallback-queue-name",disableUnderline:!0,readOnly:!1,name:"fallbackQueueName",value:this.state.fallbackQueueName,onChange:this.handleInputChange})),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{type:"text",htmlFor:"default-error-message"},"Default Error Message"),r.a.createElement(Jt.a,{id:"default-error-message",disableUnderline:!0,readOnly:!1,name:"defaultErrorMessage",value:this.state.defaultErrorMessage,onChange:this.handleInputChange})),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"max-vm-duration"},"Max Voicemail Duration (sec.)"),r.a.createElement(Jt.a,{type:"number",inputProps:{min:"1",max:"120",step:"1"},id:"max-vm-duration",disableUnderline:!0,readOnly:!1,name:"maxVoicemailDuration",value:this.state.maxVoicemailDuration,onChange:this.handleInputChange})),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"loop-count"},"Incorrect Extension Loop Count"),r.a.createElement(Jt.a,{type:"number",inputProps:{min:"0",max:"10",step:"1"},id:"loop-count",disableUnderline:!0,readOnly:!1,name:"errorLoopCount",value:this.state.errorLoopCount,onChange:this.handleInputChange}))),this.props.downloadError?r.a.createElement("p",{className:e.error},this.props.downloadError):null,r.a.createElement(nt.a,{className:e.padTop,container:!0,spacing:5,direction:"row"},r.a.createElement(nt.a,{item:!0},r.a.createElement(Nt,{loading:this.props.downloading,color:"primary",variant:"contained",onClick:this.handleDownload,disabled:"Administrator"!=this.props.userRole},"Download"))))}}]),n}(a.Component),Yt=Object(Be.b)((function(e){var t="";if(!e.auth.user)return{userEmail:null,userRole:null};var n=e.auth.user.roles;return n.includes(st.MANAGER)&&(t="Manager"),n.includes(st.ADMIN)&&(t="Administrator"),{downloading:e.contactFlow.downloading,downloadError:e.contactFlow.downloadError,userRole:t}}),(function(e){return{showModal:function(t){return e(De(t))},download:function(t){return e(Ve(t))}}}))(Object(Ye.a)((function(e){return Object(c.a)(Object(c.a)({},e.modal),{},{root:{padding:0}})}))(Qt)),Xt=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleEventInputChange=function(e){"deliveryEmail"===e.target.name?a.setState(Object(c.a)(Object(c.a)({},a.state),{},Object(Kt.a)({},e.target.name,e.target.value))):a.setState(Object(c.a)(Object(c.a)({},a.state),{},Object(Kt.a)({},e.target.name,e.target.checked)))},a.handleSave=function(){var e={transcribeVoicemail:null!==a.state.transcribeEnabled?a.state.transcribeEnabled:a.props.transcribeVoicemail,encryptVoicemail:null!==a.state.encryptionEnabled?a.state.encryptionEnabled:a.props.encryptVoicemail,deliveryEmail:""===a.state.deliveryEmail?a.props.deliveryEmail:a.state.deliveryEmail,availableSMSCountries:a.props.availableSMSCountries};a.props.save(e),a.props.showModal(!1)},a.state={deliveryEmail:"",transcribeEnabled:null,encryptionEnabled:null},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.fetch()}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.transcribeEnabled;null===this.state.transcribeEnabled&&(n=this.props.transcribeVoicemail);var a=this.state.encryptionEnabled;return null===this.state.encryptionEnabled&&(a=this.props.encryptVoicemail),r.a.createElement("div",{className:t.root},r.a.createElement("h6",{className:t.title},"Global Configurations"),r.a.createElement("div",{className:t.checkBox},r.a.createElement(Wt.a,{control:r.a.createElement(zt.a,{name:"transcribeEnabled",id:"transcribe",disabled:this.props.loading||this.props.saving,onChange:this.handleEventInputChange,checked:n,color:"primary"}),label:"Allow Voicemail Transcriptions"}),r.a.createElement(Wt.a,{control:r.a.createElement(zt.a,{name:"encryptionEnabled",id:"encrypt",disabled:this.props.loading||this.props.saving,onChange:this.handleEventInputChange,checked:a,color:"primary"}),label:"Enforce Voicemail Encryption"}),r.a.createElement(xt.a,{name:"deliveryEmail",disabled:this.props.loading||this.props.saving,className:t.deliveryEmail,fullWidth:!0,placeholder:this.props.deliveryEmail,onChange:this.handleEventInputChange,value:this.state.deliveryEmail||this.props.deliveryEmail,label:"Delivery Email"}),r.a.createElement("p",{className:t.infoCaption},"Important: Delivery Email must be verified via Amazon Simple Email Service before emails can be delivered")),r.a.createElement(nt.a,{container:!0,spacing:5,direction:"row"},r.a.createElement(nt.a,{item:!0},r.a.createElement(pt.a,{color:"secondary",onClick:function(){e.props.showModal(!1)}},"Cancel")),r.a.createElement(nt.a,{item:!0},r.a.createElement(Nt,{loading:this.props.saving,color:"primary",variant:"contained",disabled:"Administrator"!=this.props.userRole,onClick:this.handleSave},"Save"))),r.a.createElement("div",{className:t.spacer}),r.a.createElement(Yt,null))}}]),n}(a.Component),$t=Object(Be.b)((function(e){var t="";if(!e.auth.user)return{userEmail:null,userRole:null};var n=e.auth.user.roles;return n.includes(st.MANAGER)&&(t="Manager"),n.includes(st.ADMIN)&&(t="Administrator"),{loading:e.globalSettings.loading,deliveryEmail:e.globalSettings.deliveryEmail||"",transcribeVoicemail:e.globalSettings.transcribeVoicemail,encryptVoicemail:e.globalSettings.encryptVoicemail,availableSMSCountries:e.globalSettings.availableSMSCountries,saving:e.globalSettings.saving,userRole:t}}),(function(e){return{fetch:function(){return e(Oe())},showModal:function(t){return e(ye(t))},save:function(t){return e(Se(t))}}}))(Object(Ye.a)((function(e){return{root:{padding:0},title:{fontSize:25,padding:0,margin:0},paper:{padding:20,width:450},checkBox:{marginTop:15,marginBottom:15},deliveryEmail:{marginTop:15},infoCaption:e.infoCaption,spacer:{marginTop:"20px",marginBottom:"10px",borderBottom:"1px solid rgb(220, 220, 220, 0.5)"}}}))(Xt)),Zt=n(425),en=n.n(Zt),tn=n(426),nn=n.n(tn),an=function(e){var t=e.label,n=e.checked,a=e.onChange,i=e.name,o=e.id;e.color;return r.a.createElement(Wt.a,{control:r.a.createElement(zt.a,{name:i,id:o,onChange:a,checked:n,color:"primary"}),label:t})},rn=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleCheckBoxChange=function(e){a.setState(Object(c.a)(Object(c.a)({},a.state),{},Object(Kt.a)({},e.target.name,e.target.checked)))},a.handleExtensionNumberChange=function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&a.setState(Object(c.a)(Object(c.a)({},a.state),{},Object(Kt.a)({},e.target.name,e.target.value)))},a.phoneNumberInputChange=function(e,t){a.setState(Object(c.a)(Object(c.a)({},a.state),{},{countryData:t,deliverSMSPhoneNumber:e}))},a.handleSave=function(){var e=a.state,t=e.transcribeVoicemail,n=e.encryptVoicemail,r=e.deliverSMS,i=e.deliverEmail,o=e.extensionNumber,l=e.deliverSMSPhoneNumber;if(r=null!==r?r:a.props.agent.deliverSMS,l=null!==l?l:a.props.agent.deliverSMSPhoneNumber,o=null!==o?o:a.props.agent.extension,i=null!==i?i:a.props.agent.deliverEmail,n=null!=n?n:a.props.agent.encryptVoicemail,t=null!=t?t:a.props.agent.transcribeVoicemail,r){var s=new nn.a(l);if(!s.isValid())return void a.setState(Object(c.a)(Object(c.a)({},a.state),{},{validationError:"Please provide a valid phone number."}));l=s.getNumber()}else l="";a.props.updateAgent(a.props.agent.userId,o,l,r,i,n,t)},a.state={transcribeVoicemail:null,encryptVoicemail:null,deliverSMS:null,deliverEmail:null,extensionNumber:null,deliverSMSPhoneNumber:null,validationError:null},a}return Object(u.a)(n,[{key:"formValueForKey",value:function(e,t){var n=this.state[e];return null===n&&(n=t),n}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.formValueForKey("transcribeVoicemail",this.props.agent.transcribeVoicemail),a=this.formValueForKey("encryptVoicemail",this.props.agent.encryptVoicemail),i=this.formValueForKey("deliverEmail",this.props.agent.deliverEmail),o=this.formValueForKey("deliverSMS",this.props.agent.deliverSMS),l=this.formValueForKey("extensionNumber",this.props.agent.extension),c=this.formValueForKey("deliverSMSPhoneNumber",this.props.agent.deliverSMSPhoneNumber);return r.a.createElement("div",null,r.a.createElement("h6",{className:t.title},"Agent Voicemail Settings"),r.a.createElement(nt.a,{className:t.userInfo,container:!0,direction:"column"},r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"agent-name"},"Name"),r.a.createElement(Jt.a,{id:"agent-name",disableUnderline:!0,readOnly:!0,value:this.props.agent.firstName+" "+this.props.agent.lastName})),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"phone-type"},"Email"),r.a.createElement(Jt.a,{id:"agent-email",disableUnderline:!0,readOnly:!0,value:this.props.agent.email?this.props.agent.email:this.props.agent.username})),r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"phone-type"},"Phone Type"),r.a.createElement(Jt.a,{id:"phone-type",disableUnderline:!0,readOnly:!0,value:this.props.agent.phoneType})),"Desk Phone"===this.props.agent.phoneType?r.a.createElement(qt.a,null,r.a.createElement(Ht.a,{htmlFor:"phone-number"},"Phone Number"),r.a.createElement(Jt.a,{id:"phone-number",disableUnderline:!0,readOnly:!0,value:this.props.agent.phoneNumber})):null),r.a.createElement("div",null,r.a.createElement(nt.a,{className:t.padTop,container:!0,direction:"row",justify:"flex-start"},r.a.createElement(nt.a,{item:!0},r.a.createElement(an,{label:"Transcribe",name:"transcribeVoicemail",id:"transcribe",onChange:this.handleCheckBoxChange,checked:n})),r.a.createElement(nt.a,{item:!0},r.a.createElement(an,{label:"Encrypt",name:"encryptVoicemail",id:"encrypt",onChange:this.handleCheckBoxChange,checked:a}))),r.a.createElement(xt.a,{name:"extensionNumber",inputProps:{maxlength:"5"},disabled:this.props.loading||this.props.saving,className:t.textField,fullWidth:!0,onChange:this.handleExtensionNumberChange,value:l||"",label:"Extension"}),r.a.createElement("p",null,"Delivery Options"),r.a.createElement(nt.a,{container:!0,direction:"column",justify:"flex-start"},r.a.createElement(nt.a,{item:!0},r.a.createElement(an,{label:"Email",name:"deliverEmail",id:"deliverEmail",onChange:this.handleCheckBoxChange,checked:i})),r.a.createElement(nt.a,{item:!0},r.a.createElement(an,{label:"SMS",name:"deliverSMS",id:"deliverSMS",onChange:this.handleCheckBoxChange,checked:o}))),o?r.a.createElement(en.a,{placeholder:"Phone Number for SMS",onChange:this.phoneNumberInputChange,defaultCountry:"us",disableAreaCodes:!0,onlyCountries:this.props.availableSMSCountries,countryCodeEditable:!1,autoFormat:!0,value:c||""}):null),r.a.createElement("p",null),this.props.agentUpdateError||this.state.validationError?r.a.createElement("p",{className:t.error},this.props.agentUpdateError||this.state.validationError):null,r.a.createElement(nt.a,{container:!0,spacing:5,direction:"row"},r.a.createElement(nt.a,{item:!0},r.a.createElement(pt.a,{color:"secondary",onClick:function(){e.props.showAgent(!1)}},"Cancel")),r.a.createElement(nt.a,{item:!0},r.a.createElement(Nt,{loading:this.props.agentUpdateInProgress,color:"primary",variant:"contained",onClick:this.handleSave},"Save"))))}}]),n}(a.Component),on=Object(Be.b)((function(e){return{agent:e.agents.agent,availableSMSCountries:e.globalSettings.availableSMSCountries,agentUpdateError:e.agents.updateError,agentUpdateInProgress:e.agents.updateInProgress}}),(function(e){return{showAgent:function(t,n){return e(ce(t,n))},updateAgent:function(t,n,a,r,i,o,l){return e(ie(t,n,a,r,i,o,l))}}}))(Object(Ye.a)((function(e){return Object(c.a)(Object(c.a)({},e.modal),{},{userInfo:{marginTop:20},paper:{padding:20,width:350}})}))(rn)),ln=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(dt,null),r.a.createElement("p",null," The user you logged in with is not valid. Log in again and contact your administrator if you continue to see an issue."))}}]),n}(a.Component),cn=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes;return""===this.props.role?r.a.createElement("div",null,r.a.createElement(dt,null),r.a.createElement("p",null,' The user you logged in with is not in the "Manager" Cognito User Pool group. You must be a member of this group to view this page.')):r.a.createElement("div",null,r.a.createElement(dt,null),r.a.createElement(Gt,{className:t.agentsTable}),r.a.createElement(It.a,{scroll:"paper",disableAutoFocus:!0,open:this.props.showGlobalSettingsModal,closeAfterTransition:!0,BackdropComponent:Bt.a,onClose:function(){e.props.showSettings(!1)}},r.a.createElement(Ut.a,{in:this.props.showGlobalSettingsModal},r.a.createElement(Pt.a,null,r.a.createElement($t,null)))),r.a.createElement(It.a,{scroll:"paper",disableAutoFocus:!0,open:this.props.showAgentSettings,closeAfterTransition:!0,BackdropComponent:Bt.a,onClose:function(){e.props.showAgentModal(!1)}},r.a.createElement(Ut.a,{in:this.props.showAgentSettings},r.a.createElement(Pt.a,null,r.a.createElement(on,null)))),r.a.createElement(It.a,{scroll:"paper",disableAutoFocus:!0,open:this.props.showContactFlowModal,closeAfterTransition:!0,BackdropComponent:Bt.a,onClose:function(){e.props.showContactFlow(!1)}},r.a.createElement(Ut.a,{in:this.props.showContactFlowModal},r.a.createElement(Pt.a,null,r.a.createElement(Yt,null)))))}}]),n}(a.Component),sn=Object(Be.b)((function(e){var t="";if(e.auth.user){var n=e.auth.user.roles;n&&n.includes(st.MANAGER)&&(t="Manager"),n&&n.includes(st.ADMIN)&&(t="Administrator")}return{showGlobalSettingsModal:e.globalSettings.showModal,agents:e.agents.agents,agentsSortKey:e.agents.sortKey,agentsSortOrder:e.agents.sortOrder,showAgentSettings:e.agents.showAgentSettings,agent:e.agents.agent,showContactFlowModal:e.contactFlow.showModal,contactFlowDownloading:e.contactFlow.downloading,role:t}}),(function(e){return{logout:function(){return e(j())},getAgents:function(){return e(re())},sortAgents:function(t,n){return e(oe(t,n))},showSettings:function(t){return e(ye(t))},showAgentModal:function(t,n){return e(ce(t,n))},showContactFlow:function(t){return e(De(t))},downloadContactFlow:function(t){return e(Ve(t))}}}))(Object(Ye.a)((function(e){return{agentsTable:{margin:25},modal:{display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid black"},noFocus:{padding:e.spacing(2,4,3),"&:focus":{outlineWidth:"0 !important",outlineStyle:"none"}}}}))(function(e,t){var n=function(n){Object(He.a)(i,n);var a=Object(Je.a)(i);function i(e){var t;return Object(s.a)(this,i),(t=a.call(this,e)).state={authState:"loading"},t}return Object(u.a)(i,[{key:"componentDidMount",value:function(){this._checkAndRedirect()}},{key:"componentDidUpdate",value:function(){this._checkAndRedirect()}},{key:"_checkAndRedirect",value:function(){var e=this;"loading"===this.state.authState&&p.a.currentAuthenticatedUser().then((function(t){e.props.auth(t),e.setState({authState:"valid"})})).catch((function(t){e.setState({authState:"invalid"}),e.props.redirect()}))}},{key:"render",value:function(){return"valid"===this.state.authState?r.a.createElement(e,this.props):r.a.createElement(t,this.props)}}]),i}(r.a.Component);return Object(Be.b)((function(e){return{auth:e.auth}}),(function(e){return{redirect:function(){return e((function(){$e.push("/login")}))},auth:function(t){return e(C(t))}}}))(n)}(cn,ln))),un=function(e){return{"@global":{body:Object(c.a)(Object(c.a)({},e.typography.body1),{},{margin:0}),h6:{color:e.palette.primary.main,fontWeight:"normal"}}}};p.c.configure({Auth:{region:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_COGNITO_DOMAIN:"__C_DOMAIN__",REACT_APP_COGNITO_CLIENT_ID:"__C_CLIENT_ID__",REACT_APP_COGNITO_USER_POOL_ID:"__C_POOL__",REACT_APP_API_KEY:"__API_KEY__",REACT_APP_BASE_API:"__BASE_API__",REACT_APP_COGNITO_REDIRECT:"__C_REDIR__"}).REACT_APP_REGION,userPoolId:"__C_POOL__",userPoolWebClientId:"__C_CLIENT_ID__",oauth:{domain:"__C_DOMAIN__",scope:["profile","openid"],redirectSignIn:"__C_REDIR__",redirectSignOut:"__C_REDIR__",responseType:"code"}}});var hn=function(e){Object(He.a)(n,e);var t=Object(Je.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(Qe.c,{history:$e},r.a.createElement(Qe.d,null,r.a.createElement(Qe.b,{exact:!0,path:"/login",component:Ze}),r.a.createElement(Qe.b,{path:"/agents",component:sn}),r.a.createElement(Qe.b,{exact:!0,path:"/",component:Ze}),r.a.createElement(Qe.a,{from:"/*",exact:!0,to:"/agents"})))}}]),n}(a.Component),dn=Object(Ye.a)(un)(hn);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,mn=Object(l.e)(Ge,pn(Object(l.a)(Ue.a)));o.a.render(r.a.createElement(Be.a,{store:mn},r.a.createElement(Ke.a,{theme:qe},r.a.createElement(dn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},235:function(e,t){},240:function(e,t){},443:function(e,t,n){e.exports=n(1181)},475:function(e,t){},477:function(e,t){},487:function(e,t){},489:function(e,t){},514:function(e,t){},516:function(e,t){},517:function(e,t){},523:function(e,t){},525:function(e,t){},543:function(e,t){},546:function(e,t){},562:function(e,t){},565:function(e,t){},570:function(e,t){},572:function(e,t){},595:function(e,t){}},[[443,1,2]]]);
//# sourceMappingURL=main.4dbc1675.chunk.js.map