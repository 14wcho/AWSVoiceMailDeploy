{"version":3,"sources":["dto/auth.dto.ts","service/api.service.ts","store/actions/auth.actions.ts","service/auth.service.ts","store/reducers/auth.reducer.ts","dto/agent.dto.ts","dto/agent-request.dto.ts","dto/pagination.dto.ts","store/actions/agents.actions.ts","service/agents.service.ts","store/reducers/agents.reducer.ts","store/actions/global-settings.actions.ts","service/global-settings.service.ts","store/reducers/global-settings.reducer.ts","service/file-saver.service.ts","service/contact-flow.service.ts","store/actions/contact-flow.actions.ts","store/reducers/contact-flow.reducer.ts","store/reducer.ts","theme/colors.js","theme/material.theme.js","history.js","auth/CognitoAuth.js","global-settings/GlobalSettingsButton.js","auth/AuthRoles.js","navigation/NavigationBar.js","common/components/AsyncButton.js","common/SearchTextField.js","agents/AgentsTable.js","contact-flow/ContactFlow.js","global-settings/GlobalSettings.js","agents/AgentSettings.js","agents/AgentsNoAuth.js","agents/Agents.js","common/requiresAuth.js","theme/global.styles.js","App.tsx","serviceWorker.js","index.tsx"],"names":["AuthDto","auth","idToken","accessToken","refreshToken","this","HttpMethod","ApiService","baseUrl","process","apiKey","next","request","getAuth","then","result","settings","contactFlowDto","contactFlow","agentId","agentRequest","agent","header","Auth","currentSession","session","getIdToken","getJwtToken","getAccessToken","getRefreshToken","getToken","method","uri","body","Promise","resolve","_post","_get","_patch","options","headers","_getHeader","json","rp","qs","authService","apiService","signOut","AuthActionKey","AuthAction","user","dispatch","payload","getSignInUserSession","decodePayload","authenticated","type","value","isAuthenticated","loginResults","email","roles","logout","initialState","loading","loginError","changePassword","reducer","state","action","error","_error","name","AgentDto","userId","username","firstName","lastName","phoneType","phoneNumber","extension","encryptVoicemail","transcribeVoicemail","deliverSMS","deliverSMSPhoneNumber","deliverEmail","connectUser","phoneTypeToDisplayString","deskPhoneNumber","deliveryOptions","sms","enabled","AgentRequestDto","extensionNumber","PaginationDto","data","current","agentsService","getAgents","agents","map","fromBasicAgent","updateAgentSettings","fromAgent","getAgent","syncAgent","AgentsActionKey","AgentsSortKey","AgentsSortOrder","loadingResults","getAgentsResults","showAgentResults","showAgentSettings","updatingInProgressResults","updating","updateAgentErrorResults","_getAgents","a","_syncAgent","AgentsAction","updateAgent","updateAgentResults","catch","err","finally","sortKey","sortOrder","sortAgentsResults","filter","filterAgentsResults","show","agentList","updateInProgress","updateError","page","prev","sortAgents","toLowerCase","includes","sort","b","length","shift","push","unshift","pop","Object","assign","index","findIndex","undefined","errorMessage","message","globalSettingsService","getGlobalSettings","saveGlobalSettings","GlobalSettingsActionKey","savingResults","saving","console","log","GlobalSettingsAction","showModalResults","getSettings","fetchSettingsResult","saveSettings","saveSettingsResult","showModal","deliveryEmail","availableSMSCountries","FileSaverType","FileSaverService","charset","fileName","document","createElement","href","download","click","ContactFlowService","fileSaver","getContactFlow","handleMultipleFlows","flowArr","saveAsJson","metadata","save","encodeURI","JSON","stringify","fileSaverService","contactFlowService","ContactFlowActionKey","downloadErrorResults","downloadingResults","downloading","ContactFlowAction","contactFloDto","downloadContactFlow","downloadResult","downloadError","rootReducer","combineReducers","authReducer","agentsReducer","globalSettings","globalSettingsReducer","contactFlowReducer","themeColors","mediumGray","primary","turquoise","navBar","materialTheme","createMuiTheme","spacing","typography","fontFamily","join","colors","palette","main","secondary","boxShadow","high","medium","low","overrides","MuiTableCell","stickyHeader","backgroundColor","head","color","MuiTableSortLabel","active","icon","infoCaption","fontSize","modal","root","padding","title","margin","paper","width","inputsContainer","marginTop","padTop","createBrowserHistory","CognitoAuth","props","Hub","listen","event","history","setState","authState","authData","location","search","startsWith","currentAuthenticatedUser","e","federatedSignIn","className","Component","GlobalSettingsButton","handleButtonClick","showGlobalSettingsModal","showSettingsModal","IconButton","onClick","Settings","connect","AuthRoles","ADMIN","MANAGER","theme","NavigationBar","handleOnLogout","classes","AppBar","position","Toolbar","Grid","container","direction","justify","alignContent","alignItems","item","alt","logo","src","Typography","variant","userInfo","role","userRole","userEmail","ExitToApp","withStyles","flexGrow","height","grow","marginRight","textAlign","fontWeight","paddingTop","AsyncButton","disabled","Button","span","children","CircularProgress","progress","size","marginLeft","verticalAlign","SearchTextField","handleSearchChange","updateSearch","target","searchValue","searchText","searchChangeFunc","Search","TextField","textField","placeholder","onChange","showClearButton","Cancel","clearSearch","marginBottom","cursor","zIndex","headerCells","id","numeric","disablePadding","label","sortable","AgentsTable","sortBy","filterAgents","showAgent","showAgentModal","handleSync","syncOpen","syncAgents","searchTextField","fetchGlobalSettings","Paper","topBar","searchBox","ref","c","searchFilter","syncButton","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","Table","table","aria-label","TableHead","TableRow","headerCell","TableCell","tableCell","key","align","TableSortLabel","hideSortIcon","IconComponent","ArrowDropDown","TableBody","hover","Check","checkDisable","delivery","navigationBar","KeyboardArrowLeft","navButton","KeyboardArrowRight","overflowX","minWidth","borderRight","float","ContactFlow","handleDownload","welcomeMessage","defaultErrorMessage","maxVoicemailDuration","durationType","fallbackQueueName","errorLoopCount","handleInputChange","preventDefault","FormControl","InputLabel","htmlFor","Input","disableUnderline","readOnly","inputProps","min","max","step","GlobalSettings","handleEventInputChange","checked","handleSave","transcribeEnabled","encryptionEnabled","fetch","transcribe","encrypt","checkBox","FormControlLabel","control","Checkbox","fullWidth","spacer","borderBottom","FormControlCheckBox","AgentSettings","handleCheckBoxChange","handleExtensionNumberChange","test","phoneNumberInputChange","countryData","phone","PhoneNumber","isValid","validationError","getNumber","defaultValue","formValueForKey","maxlength","defaultCountry","disableAreaCodes","onlyCountries","countryCodeEditable","autoFormat","agentUpdateError","agentUpdateInProgress","AgentsNoAuth","Agents","agentsTable","scroll","disableAutoFocus","closeAfterTransition","BackdropComponent","Backdrop","showSettings","Fade","in","showContactFlowModal","showContactFlow","agentsSortKey","agentsSortOrder","contactFlowDownloading","display","justifyContent","border","noFocus","outlineWidth","outlineStyle","ComposedComponent","UnauthedComponent","Authenticate","_checkAndRedirect","redirect","React","requiresAuth","styles","body1","h6","Amplify","configure","region","REACT_APP_REGION","userPoolId","userPoolWebClientId","oauth","domain","scope","redirectSignIn","redirectSignOut","responseType","App","exact","path","component","Contacts","from","to","globalStyles","Boolean","window","hostname","match","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4dbc1675.chunk.js","sourcesContent":["/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {AuthInterface} from \"../interface/auth.interface\";\n\nclass AuthDto {\n\n    idToken: string;\n    accessToken: string;\n    refreshToken: string;\n\n    constructor(auth: AuthInterface) {\n        this.idToken = auth.idToken;\n        this.accessToken = auth.accessToken;\n        this.refreshToken = auth.refreshToken;\n    }\n\n}\n\nexport default AuthDto","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport rp from 'request-promise';\nimport { Auth } from 'aws-amplify';\nimport { AuthInterface } from \"../interface/auth.interface\";\nimport { GlobalSettingsInterface } from \"../interface/global-settings.interface\";\nimport { AgentInterface, BasicAgentInterface } from \"../interface/agent.interface\";\nimport AgentRequestDto from \"../dto/agent-request.dto\";\nimport ContactFlowDto from \"../dto/contact-flow.dto\";\nimport AuthDto from \"../dto/auth.dto\";\nimport { PageInterface } from \"../interface/page.interface\";\n\nconst HttpMethod = {\n  POST: \"POST\",\n  GET: \"GET\",\n  PATCH: \"PATCH\"\n};\n\nclass ApiService {\n\n  baseUrl = process.env.REACT_APP_BASE_API;\n  apiKey = process.env.REACT_APP_API_KEY;\n\n  getAgents(next: string | null): Promise<PageInterface<BasicAgentInterface>> {\n    return this.request(HttpMethod.GET, `${this.baseUrl}/agents`, {\n      next\n    }, this.getAuth());\n  }\n\n  getGlobalSettings() {\n    return this.request(HttpMethod.GET, `${this.baseUrl}/global/settings`, null, this.getAuth())\n      .then(result => result.settings);\n  }\n\n  getContactFlow(contactFlowDto: ContactFlowDto) {\n    return this.request(HttpMethod.POST, `${this.baseUrl}/contact/flow`, contactFlowDto, this.getAuth())\n      .then(result => result.contactFlow)\n  }\n\n  syncAgent() {\n    return this.request(HttpMethod.POST, `${this.baseUrl}/agents/sync`, null, this.getAuth());\n  }\n\n  updateAgentSettings(agentId: string, agentRequest: AgentRequestDto) {\n    return this.request(HttpMethod.POST, `${this.baseUrl}/agents/${agentId}`, agentRequest, this.getAuth())\n      .then(result => result.agent)\n  }\n\n  getAgent(agentId: string): Promise<AgentInterface> {\n    return this.request(HttpMethod.GET, `${this.baseUrl}/agents/${agentId}`, null, this.getAuth())\n  }\n\n  saveGlobalSettings(settings: GlobalSettingsInterface) {\n    return this.request(HttpMethod.POST, `${this.baseUrl}/global/settings`, settings, this.getAuth())\n      .then(result => result.settings);\n  }\n\n  _getHeader(auth: AuthInterface | null): object {\n    let header: any = {\n      'x-api-key': this.apiKey\n    };\n    if (auth) {\n      header['Authorization'] = `Bearer ${auth.idToken}`;\n    }\n    // console.log(\"The header\", header);\n    return header\n  }\n\n  getAuth(): Promise<AuthInterface | null> {\n    return Auth.currentSession()\n      .then(session => new AuthDto({\n        idToken: session.getIdToken().getJwtToken(),\n        accessToken: session.getAccessToken().getJwtToken(),\n        refreshToken: session.getRefreshToken().getToken()\n      }));\n  }\n\n  request(method: string, uri: string, body: object | null, auth: Promise<AuthInterface | null> = Promise.resolve(null)): Promise<any> {\n\n    if (method === HttpMethod.POST) {\n      return auth.then(auth => this._post(uri, body, auth));\n    } else if (method === HttpMethod.GET) {\n      return auth.then(auth => this._get(uri, body, auth));\n    } else if (method === HttpMethod.PATCH) {\n      return auth.then(auth => this._patch(uri, body, auth));\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  _post(uri: string, body: object | null = {}, auth: AuthInterface | null = null) {\n    let options = { method: HttpMethod.POST, uri, body, headers: this._getHeader(auth), json: true };\n    return rp(options)\n  }\n\n  _get(uri: string, qs: object | null, auth: AuthInterface | null = null) {\n    let options = { method: HttpMethod.GET, uri, qs, headers: this._getHeader(auth), json: true };\n    return rp(options)\n  }\n\n  _patch(uri: string, body: object | null = {}, auth: AuthInterface | null = null) {\n    let options = { method: HttpMethod.PATCH, uri, body, headers: this._getHeader(auth), json: true };\n    return rp(options)\n  }\n\n}\n\nexport { ApiService };\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {ApiService} from \"../../service/api.service\";\nimport history from \"../../history\";\nimport AuthService from \"../../service/auth.service\";\nimport {Dispatch} from \"redux\";\nimport {UserInterface} from \"../../interface/user.interface\";\nimport {CognitoUser} from \"amazon-cognito-identity-js\";\n\nconst apiService = new ApiService();\nconst authService = new AuthService(apiService);\n\nconst AuthActionKey = {\n    LOGIN_PENDING: \"LOGIN_PENDING\",\n    LOGIN: \"LOGIN\",\n    LOGOUT: \"LOGOUT\",\n    LOGIN_ERROR: \"LOGIN_ERROR\"\n};\n\nconst loginResults = (authenticated: boolean, user: UserInterface) => {\n    return {\n        type: AuthActionKey.LOGIN,\n        value: {\n            isAuthenticated: authenticated,\n            user\n        }\n    }\n};\n\nconst loginErrorResults = (error: any) => {\n    return {\n        type: AuthActionKey.LOGIN_ERROR,\n        value: {\n            error\n        }\n    }\n};\n\nconst logoutResults = () => {\n    return {\n        type: AuthActionKey.LOGOUT\n    }\n};\n\nconst AuthAction = {\n    auth: (user: CognitoUser) => {\n        return (dispatch: Dispatch) => {\n            let payload = user.getSignInUserSession()!.getIdToken().decodePayload();\n            dispatch(loginResults(true, {\n                email: payload['email'],\n                roles: payload['cognito:groups']\n            }));\n        };\n    },\n    logout: () => {\n        return (dispatch: Dispatch) => {\n            authService.logout();\n            // dispatch(logoutResults());\n            // dispatch(loginErrorResults(null));\n            // history.push('/login');\n        }\n    }\n};\n\nexport {AuthActionKey, AuthAction}","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {ApiService} from \"./api.service\";\nimport AuthDto from \"../dto/auth.dto\";\nimport {Auth} from 'aws-amplify';\n\nclass AuthService {\n\n    private apiService: ApiService;\n\n    constructor(apiService: ApiService) {\n        this.apiService = apiService;\n    }\n\n    logout() {\n        Auth.signOut();\n    }\n\n}\n\nexport default AuthService;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {AuthActionKey} from \"../actions/auth.actions\";\nimport {Reducer} from \"redux\";\n\nconst initialState = {\n    loading: false,\n    loginError: null,\n    isAuthenticated: false,\n\n    // indicate if change password is requested by cognito.\n    changePassword: false,\n    user: {\n        email: \"\",\n        roles: []\n    }\n};\n\nconst reducer: Reducer = (state = initialState, action: any): object => {\n    switch (action.type) {\n        case AuthActionKey.LOGIN_PENDING:\n            return {\n                ...state,\n                loading: action.value\n            };\n        case AuthActionKey.LOGIN_ERROR:\n            let changePassword = state.changePassword || false;\n            let result = action.value.error;\n\n            // once the changePassword is set, we keep it on until the user is successful...\n            if (!changePassword && result) {\n                changePassword = result.error._error.name === \"NewPasswordRequired\";\n            }\n\n            return {\n                ...state,\n                changePassword: changePassword,\n                loginError: result\n            };\n        case AuthActionKey.LOGIN:\n            return {\n                ...state,\n                isAuthenticated: true,\n                changePassword: false,\n                user: action.value.user\n            };\n        case AuthActionKey.LOGOUT:\n            return {\n                ...state,\n                changePassword: false,\n                isAuthenticated: false,\n                user: null\n            };\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default reducer;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {AgentInterface, BasicAgentInterface} from \"../interface/agent.interface\";\n\nclass AgentDto {\n    constructor(\n        public userId: string,\n        public username: string,\n        public firstName: string,\n        public lastName: string,\n        public email: string,\n        public phoneType: string,\n        public phoneNumber: string,\n        public extension: string,\n        public encryptVoicemail: boolean,\n        public transcribeVoicemail: boolean,\n        public deliverSMS: boolean,\n        public deliverSMSPhoneNumber: boolean,\n        public deliverEmail: boolean\n    ) {\n    }\n\n    static fromAgent(agent: AgentInterface): AgentDto {\n        return new this(\n            agent.userId,\n            agent.connectUser.username,\n            agent.connectUser.firstName,\n            agent.connectUser.lastName,\n            agent.connectUser.email,\n            AgentDto.phoneTypeToDisplayString(agent.connectUser.phoneType),\n            agent.connectUser.deskPhoneNumber,\n            agent.agent.extension,\n            agent.agent.encryptVoicemail || false,\n            agent.agent.transcribeVoicemail || false,\n            agent.agent.deliveryOptions.sms.enabled || false,\n            agent.agent.deliveryOptions.sms.phoneNumber,\n            agent.agent.deliveryOptions.email || false\n        );\n    }\n\n    static fromBasicAgent(agent: BasicAgentInterface): AgentDto {\n        const sms = (agent.deliveryOptions || {}).sms || {};\n        const deliveryOptions = agent.deliveryOptions || {};\n\n        return new this(\n            agent.userId,\n            agent.username,\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            agent.extension,\n            agent.encryptVoicemail || false,\n            agent.transcribeVoicemail || false,\n            sms.enabled || false,\n            sms.phoneNumber,\n            deliveryOptions.email || false\n        );\n\n    }\n\n    static phoneTypeToDisplayString(type: string): string {\n        switch (type) {\n            case \"SOFT_PHONE\":\n                return \"Soft Phone\";\n            case \"DESK_PHONE\":\n                return \"Desk Phone\";\n            default:\n                return \"\";\n        }\n    }\n\n}\n\nexport default AgentDto;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nclass AgentRequestDto {\n\n    extension: string | null;\n    deliverSMSPhoneNumber: string | null;\n    deliverSMS: boolean;\n    deliverEmail: boolean;\n    encryptVoicemail: boolean;\n    transcribeVoicemail: boolean;\n\n    constructor(\n        extensionNumber: string,\n        deliverSMSPhoneNumber: string,\n        deliverSMS: boolean,\n        deliverEmail: boolean,\n        encryptVoicemail: boolean,\n        transcribeVoicemail: boolean\n    ) {\n        this.extension = extensionNumber || \"\";\n        this.deliverSMSPhoneNumber = deliverSMSPhoneNumber || \"\";\n        this.deliverSMS = deliverSMS || false;\n        this.deliverEmail = deliverEmail || false;\n        this.encryptVoicemail = encryptVoicemail || false;\n        this.transcribeVoicemail = transcribeVoicemail || false;\n    }\n\n}\n\nexport default AgentRequestDto;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nexport class PaginationDto<T> {\n    constructor(\n        public data: T[],\n        public next: string | null,\n        public current: string | null\n    ) {}\n}","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport AgentsService from \"../../service/agents.service\";\nimport { ApiService } from \"../../service/api.service\";\nimport { Dispatch } from \"redux\";\nimport AgentDto from \"../../dto/agent.dto\";\nimport { PaginationDto } from \"../../dto/pagination.dto\";\n\nconst agentsService = new AgentsService(new ApiService());\n\nconst AgentsActionKey = {\n  AGENTS_LOADING: \"LOADING\",\n  GET_AGENTS: \"GET_AGENTS\",\n  SORT_AGENTS: \"SORT_AGENTS\",\n  FILTER_AGENTS: \"FILTER_AGENTS\",\n  SHOW_AGENT: \"SHOW_AGENT\",\n  UPDATE_IN_PROGRESS: \"UPDATE_IN_PROGRESS\",\n  UPDATE_AGENT: \"UPDATE_AGENT\",\n  UPDATE_AGENT_ERROR: \"UPDATE_AGENT_ERROR\"\n};\n\nconst AgentsSortKey = {\n  FIRST_NAME: \"firstName\",\n  LAST_NAME: \"lastName\",\n  EMAIL: \"email\",\n  PHONE_TYPE: \"phoneType\",\n  EXTENSION: \"extension\"\n};\n\nconst AgentsSortOrder = {\n  ASC: \"asc\",\n  DESC: \"desc\"\n};\n\nconst loadingResults = (loading: boolean) => {\n  return {\n    type: AgentsActionKey.AGENTS_LOADING,\n    value: loading\n  }\n};\n\nconst getAgentsResults = (agents: PaginationDto<AgentDto>) => {\n  return {\n    type: AgentsActionKey.GET_AGENTS,\n    value: agents\n  }\n};\n\nconst sortAgentsResults = (sortKey: string, sortOrder: string) => {\n  return {\n    type: AgentsActionKey.SORT_AGENTS,\n    value: {\n      sortKey,\n      sortOrder\n    }\n  }\n};\n\nconst filterAgentsResults = (filter: string) => {\n  return {\n    type: AgentsActionKey.FILTER_AGENTS,\n    value: filter\n  }\n};\n\nconst showAgentResults = (showAgentSettings: boolean, agent: AgentDto | null = null) => {\n  return {\n    type: AgentsActionKey.SHOW_AGENT,\n    value: { showAgentSettings, agent }\n  }\n};\n\nconst updatingInProgressResults = (updating: boolean) => {\n  return {\n    type: AgentsActionKey.UPDATE_IN_PROGRESS,\n    value: updating\n  };\n};\n\nconst updateAgentResults = (agent: AgentDto) => {\n  return {\n    type: AgentsActionKey.UPDATE_AGENT,\n    value: { agent }\n  }\n};\n\nconst updateAgentErrorResults = (error: Error | null) => {\n  return {\n    type: AgentsActionKey.UPDATE_AGENT_ERROR,\n    value: error\n  }\n};\n\nconst _getAgents = async (dispatch: Dispatch, next: string | null) => {\n  dispatch(loadingResults(true));\n  try {\n    let agents = await agentsService.getAgents(next);\n    dispatch(getAgentsResults(agents));\n  } catch (err) {\n    // console.log(err);\n  } finally {\n    dispatch(loadingResults(false));\n  }\n};\n\nconst _syncAgent = async (dispatch: Dispatch) => {\n  await agentsService.syncAgent();\n  return _getAgents(dispatch, null);\n};\n\nconst AgentsAction = {\n  syncAgents: () => async (dispatch: Dispatch) => _syncAgent(dispatch),\n  getAgents: (next: string | null) => (dispatch: Dispatch) => _getAgents(dispatch, next),\n  updateAgent: (\n    agentId: string,\n    extensionNumber: string,\n    deliverSMSPhoneNumber: string,\n    deliverSMS: boolean,\n    deliverEmail: boolean,\n    encryptVoicemail: boolean,\n    transcribeVoicemail: boolean\n  ) => {\n    return (dispatch: Dispatch) => {\n      dispatch(updatingInProgressResults(true));\n      dispatch(updateAgentErrorResults(null));\n      agentsService.updateAgent(agentId,\n        extensionNumber, deliverSMSPhoneNumber, deliverSMS,\n        deliverEmail, encryptVoicemail, transcribeVoicemail)\n        .then(agent => {\n          // console.log(\"Agent Updated\"!, agent);\n          dispatch(updateAgentResults(agent));\n          dispatch(showAgentResults(false));\n        })\n        .catch(err => {\n          dispatch(updateAgentErrorResults(err))\n        })\n        .finally(() => {\n          dispatch(updatingInProgressResults(false));\n        })\n    }\n  },\n  sortAgents: (sortKey: string, sortOrder: string) =>\n    (dispatch: Dispatch) =>\n      dispatch(sortAgentsResults(sortKey, sortOrder)),\n  filterAgents: (filter: string) =>\n    (dispatch: Dispatch) =>\n      dispatch(filterAgentsResults(filter)),\n  showAgent: (show: boolean, agent: AgentDto | null) => async (dispatch: Dispatch) => {\n    // console.log(agent);\n\n    if (agent == null) {\n      dispatch(showAgentResults(show, agent));\n      dispatch(updateAgentErrorResults(null));\n    } else {\n      try {\n        let result = await agentsService.getAgent(agent.userId);\n        dispatch(showAgentResults(show, result));\n        dispatch(updateAgentErrorResults(null))\n      } catch (err) {\n        // console.log(err);\n      }\n    }\n  }\n};\n\nexport { AgentsAction, AgentsActionKey, AgentsSortKey, AgentsSortOrder }\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {ApiService} from \"./api.service\";\nimport AgentDto from \"../dto/agent.dto\";\nimport AgentRequestDto from \"../dto/agent-request.dto\";\nimport {PaginationDto} from \"../dto/pagination.dto\";\n\nclass AgentsService {\n\n    apiService: ApiService;\n\n    constructor(apiService: ApiService) {\n        this.apiService = apiService;\n    }\n\n    getAgents(next : string | null): Promise<PaginationDto<AgentDto>> {\n        return this.apiService.getAgents(next)\n            .then(agents => new PaginationDto<AgentDto>(\n                agents.data.map(agent => AgentDto.fromBasicAgent(agent)),\n                agents.next,\n                next));\n    }\n\n    /**\n     *\n     * @param agentId\n     * @param extensionNumber\n     * @param deliverSMSPhoneNumber\n     * @param deliverSMS\n     * @param deliverEmail\n     * @param encryptVoicemail\n     * @param transcribeVoicemail\n     * @returns {Promise<AgentDto>}\n     */\n    updateAgent(\n        agentId: string,\n        extensionNumber: string,\n        deliverSMSPhoneNumber: string,\n        deliverSMS: boolean,\n        deliverEmail: boolean,\n        encryptVoicemail: boolean,\n        transcribeVoicemail: boolean\n    ): Promise<AgentDto> {\n        let agentRequest = new AgentRequestDto(\n            extensionNumber,\n            deliverSMSPhoneNumber,\n            deliverSMS,\n            deliverEmail,\n            encryptVoicemail,\n            transcribeVoicemail\n        );\n        return this.apiService.updateAgentSettings(agentId, agentRequest)\n            .then(agent => AgentDto.fromAgent(agent))\n    }\n\n    getAgent(agentId: string): Promise<AgentDto> {\n        return this.apiService.getAgent(agentId)\n            .then(agent => AgentDto.fromAgent(agent))\n    }\n\n    async syncAgent() {\n        return this.apiService.syncAgent();\n    }\n}\n\nexport default AgentsService;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {AgentsActionKey, AgentsSortKey, AgentsSortOrder} from \"../actions/agents.actions\";\nimport {Reducer} from \"redux\";\nimport AgentDto from \"../../dto/agent.dto\";\n\n/**\n * @property {boolean} loading\n * @property {AgentDto[]} agentList\n */\nconst initialState = {\n    loading: false,\n    agentList: [],\n    sortKey: AgentsSortKey.FIRST_NAME,\n    sortOrder: AgentsSortOrder.ASC,\n    filter: \"\",\n    agents: [],\n    showAgentSettings: false,\n    agent: null,\n    updateInProgress: false,\n    updateError: null,\n    page: {\n        next: [],\n        prev: [],\n        current: null\n    }\n};\n\nconst reducer: Reducer = (state = initialState, action: any) => {\n    switch (action.type) {\n        case AgentsActionKey.GET_AGENTS: {\n            let agents = sortAgents(action.value.data, state.sortKey, state.sortOrder);\n            let page = {\n                next: [...state.page.next],\n                current: action.value.current,\n                prev: [...state.page.prev]\n            };\n\n            // shift the pagination by 1 to next/prev.\n            if (page.next.length && page.next[0] === action.value.current) {\n                // user moved forward one\n                page.next.shift();\n                page.prev.push(state.page.current)\n            } else if (state.page.prev.length && state.page.prev[state.page.prev.length - 1] === action.value.current) {\n                page.next.unshift(state.page.current);\n                page.prev.pop();\n            }\n\n            if (action.value.next && !page.next.length) {\n                page.next.push(action.value.next);\n            }\n\n            return {\n                ...state,\n                agentList: agents,\n                agents,\n                page\n            };\n        }\n        case AgentsActionKey.SORT_AGENTS: {\n            return {\n                ...state,\n                sortKey: action.value.sortKey,\n                sortOrder: action.value.sortOrder,\n                agents: sortAgents([...state.agentList], action.value.sortKey, action.value.sortOrder, state.filter),\n            };\n        }\n        case AgentsActionKey.FILTER_AGENTS:\n            return {\n                ...state,\n                filter: action.value,\n                agents: sortAgents([...state.agentList], state.sortKey, state.sortOrder, action.value),\n            };\n        case AgentsActionKey.AGENTS_LOADING:\n            return {\n                ...state,\n                loading: action.value\n            };\n        case AgentsActionKey.SHOW_AGENT:\n            return {\n                ...state,\n                agent: action.value.agent || Object.assign({}, state.agent),\n                showAgentSettings: action.value.showAgentSettings\n            };\n        case AgentsActionKey.UPDATE_AGENT:\n            let agents = [...state.agents];\n            let index = agents.findIndex(agent => agent.userId === action.value.agent.userId);\n            if (index !== undefined) {\n                agents[index] = action.value.agent;\n            }\n            return {\n                ...state,\n                agentList: agents,\n                agents: sortAgents(agents, state.sortKey, state.sortOrder, state.filter)\n            };\n        case AgentsActionKey.UPDATE_IN_PROGRESS:\n            return {\n                ...state,\n                updateInProgress: action.value\n            };\n        case AgentsActionKey.UPDATE_AGENT_ERROR:\n            let errorMessage = null;\n            if (action.value) {\n                errorMessage = action.value.error._error.message;\n            }\n            return {\n                ...state,\n                updateError: errorMessage\n            };\n        default:\n            return state;\n    }\n};\n\nfunction sortAgents(agents: AgentDto[], sortKey: string, sortOrder: string, filter: string = \"\") {\n    return agents\n        .filter(agent => {\n            return ((agent.firstName || \"\").toLowerCase().includes(filter.toLowerCase()) ||\n                (agent.lastName || \"\").toLowerCase().includes(filter.toLowerCase()) ||\n                (agent.username || \"\").toLowerCase().includes(filter.toLowerCase()) ||\n                (agent.email || \"\").toLowerCase().includes(filter.toLowerCase()) ||\n                (agent.extension || \"\").includes(filter.toLowerCase()))\n        }).sort((a, b) => {\n            switch (sortKey) {\n                case AgentsSortKey.FIRST_NAME:\n                    return (sortOrder === AgentsSortOrder.ASC) ?\n                        (a.firstName > b.firstName ? 1 : -1) :\n                        (a.firstName < b.firstName ? 1 : -1);\n                case AgentsSortKey.LAST_NAME:\n                    return (sortOrder === AgentsSortOrder.ASC) ?\n                        (a.lastName > b.lastName ? 1 : -1) :\n                        (a.lastName < b.lastName ? 1 : -1);\n                case AgentsSortKey.EMAIL:\n                    return (sortOrder === AgentsSortOrder.ASC) ?\n                        (a.email > b.email ? 1 : -1) :\n                        (a.email < b.email ? 1 : -1);\n                case AgentsSortKey.EXTENSION:\n                    return (sortOrder === AgentsSortOrder.ASC) ?\n                        (a.extension > b.extension ? 1 : -1) :\n                        (a.extension < b.extension ? 1 : -1);\n                default:\n                    return (sortOrder === AgentsSortOrder.ASC) ?\n                        (a.firstName > b.firstName ? 1 : -1) :\n                        (a.firstName < b.firstName ? 1 : -1);\n            }\n        })\n}\n\nexport default reducer;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {GlobalSettingsService} from \"../../service/global-settings.service\";\nimport {ApiService} from \"../../service/api.service\";\nimport {Dispatch} from \"redux\";\nimport {GlobalSettingsInterface} from \"../../interface/global-settings.interface\";\nimport {AgentInterface} from \"../../interface/agent.interface\";\n\nconst globalSettingsService = new GlobalSettingsService(new ApiService());\n\nconst GlobalSettingsActionKey = {\n    SHOW_GLOBAL_SETTINGS_MODAL: \"SHOW_MODAL\",\n    SETTINGS_LOADING: \"LOADING\",\n    SAVE_IN_PROGRESS: \"SAVE_IN_PROGRESS\",\n    SAVE_SETTINGS: \"SAVE_SETTINGS\",\n    FETCH_SETTINGS: \"FETCH_SETTINGS\"\n};\n\nconst showModalResults = (agent: AgentInterface) => {\n    return {\n        type: GlobalSettingsActionKey.SHOW_GLOBAL_SETTINGS_MODAL,\n        value: agent\n    }\n};\n\nconst loadingResults = (loading: boolean) => {\n    return {\n        type: GlobalSettingsActionKey.SETTINGS_LOADING,\n        value: loading\n    }\n};\n\nconst savingResults = (saving: boolean) => {\n    console.log(\"Saving\", saving);\n    return {\n        type: GlobalSettingsActionKey.SAVE_IN_PROGRESS,\n        value: saving\n    }\n};\n\nconst fetchSettingsResult = (settings: GlobalSettingsInterface) => {\n    return {\n        type: GlobalSettingsActionKey.FETCH_SETTINGS,\n        value: {\n            ...settings\n        }\n    }\n};\n\nconst saveSettingsResult = (settings: GlobalSettingsInterface) => {\n    return {\n        type: GlobalSettingsActionKey.SAVE_SETTINGS,\n        value: {\n            ...settings\n        }\n    }\n};\n\nconst GlobalSettingsAction = {\n    showModal: (agent: AgentInterface) => {\n        return (dispatch: Dispatch) => {\n            dispatch(showModalResults(agent))\n        }\n    },\n    fetchSettings: () => {\n        return (dispatch: Dispatch) => {\n            dispatch(loadingResults(true));\n            globalSettingsService.getSettings()\n                .then(settings => {\n                    dispatch(fetchSettingsResult(settings));\n                })\n                .catch(err => {\n                    // TODO: Handle Error\n                    console.log(err);\n                })\n                .finally(() => {\n                    dispatch(loadingResults(false));\n                })\n        }\n    },\n    saveSettings: (settings: GlobalSettingsInterface) => {\n        return (dispatch: Dispatch) => {\n            dispatch(savingResults(true));\n            globalSettingsService.saveSettings(settings)\n                .then(settings => {\n                    dispatch(saveSettingsResult(settings));\n                })\n                .catch(err => {\n                    // TODO: Handle Error\n                    console.log(err);\n                })\n                .finally(() => {\n                    dispatch(savingResults(false));\n                })\n        }\n    }\n};\n\nexport {GlobalSettingsActionKey, GlobalSettingsAction}","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {ApiService} from \"./api.service\";\nimport {GlobalSettingsInterface} from \"../interface/global-settings.interface\";\n\nclass GlobalSettingsService {\n\n    private apiService: ApiService;\n\n    constructor(apiService: ApiService) {\n        this.apiService = apiService;\n    }\n\n    getSettings() {\n        return this.apiService.getGlobalSettings();\n    }\n\n    saveSettings(settings: GlobalSettingsInterface) {\n        return this.apiService.saveGlobalSettings(settings);\n    }\n\n}\n\nexport {GlobalSettingsService};","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {GlobalSettingsActionKey} from \"../actions/global-settings.actions\";\nimport {Reducer} from \"redux\";\n\n\nconst initialState = {\n    showModal: false,\n    transcribeVoicemail: false,\n    encryptVoicemail: false,\n    deliveryEmail: \"\",\n    loading: false,\n    saving: false,\n    availableSMSCountries: [\"us\"]\n};\n\nconst reducer: Reducer = (state = initialState, action: any) => {\n    switch (action.type) {\n        case GlobalSettingsActionKey.SHOW_GLOBAL_SETTINGS_MODAL:\n            return {\n                ...state,\n                showModal: action.value\n            };\n        case GlobalSettingsActionKey.FETCH_SETTINGS:\n            return {\n                ...state,\n                ...action.value\n            };\n        case GlobalSettingsActionKey.SETTINGS_LOADING:\n            return {\n                ...state,\n                loading: action.value\n            };\n        case GlobalSettingsActionKey.SAVE_SETTINGS:\n            return {\n                ...state,\n                ...action.value\n            };\n        case GlobalSettingsActionKey.SAVE_IN_PROGRESS:\n            return {\n                ...state,\n                saving: action.value\n            };\n        default: {\n            return state;\n        }\n    }\n};\n\nexport default reducer","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nconst FileSaverType = {\n    JSON: \"application/json\",\n};\n\nclass FileSaverService {\n\n    save(type: string, charset: string = \"utf-8\", data: string, fileName: string) {\n        const a = document.createElement('a');\n        a.href = `data:${type};charset=${charset},${data}`;\n        a.download = fileName;\n        a.click();\n        return a;\n    }\n\n}\n\nexport default FileSaverService;\nexport {FileSaverType}","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport ContactFlowDto from \"../dto/contact-flow.dto\";\nimport { ApiService } from \"./api.service\";\nimport FileSaverService, { FileSaverType } from \"./file-saver.service\";\n\nclass ContactFlowService {\n\n  private apiService: ApiService;\n  private fileSaver: FileSaverService;\n\n  constructor(apiService: ApiService, fileSaver: FileSaverService) {\n    this.apiService = apiService;\n    this.fileSaver = fileSaver;\n  }\n\n  downloadContactFlow(contactFlowDto: ContactFlowDto) {\n    return this.apiService.getContactFlow(contactFlowDto)\n      .then(contactFlow => {\n        return this.handleMultipleFlows(contactFlow);\n      })\n  }\n\n  handleMultipleFlows(flowArr: Array<any>) {\n    this.saveAsJson(flowArr[0].metadata.name, flowArr[0]);\n    this.saveAsJson(flowArr[1].metadata.name, flowArr[1]);\n    return;\n  }\n\n  saveAsJson(fileName: string, contactFlow: object) {\n    return this.fileSaver.save(FileSaverType.JSON, 'utf-8', encodeURI(JSON.stringify(contactFlow)), fileName);\n  }\n}\n\nexport default ContactFlowService;\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport ContactFlowService from \"../../service/contact-flow.service\";\nimport { ApiService } from \"../../service/api.service\";\nimport { Dispatch } from \"redux\";\nimport ContactFlowDto from \"../../dto/contact-flow.dto\";\nimport FileSaverService from \"../../service/file-saver.service\";\n\nconst fileSaverService = new FileSaverService();\nconst contactFlowService = new ContactFlowService(new ApiService(), fileSaverService);\n\nconst ContactFlowActionKey = {\n  SHOW_CONTACT_FLOW_MODAL: \"SHOW_CONTACT_FLOW_MODAL\",\n  DOWNLOADING: \"DOWNLOADING\",\n  DOWNLOAD: \"DOWNLOAD\",\n  DOWNLOAD_ERROR: \"DOWNLOAD_ERROR\"\n};\n\nconst downloadErrorResults = (error: Error | null) => {\n  return {\n    type: ContactFlowActionKey.DOWNLOAD_ERROR,\n    value: error\n  }\n};\n\nconst downloadingResults = (downloading: Boolean) => {\n  return {\n    type: ContactFlowActionKey.DOWNLOADING,\n    value: downloading\n  }\n};\n\nconst downloadResult = (contactFlow: any) => {\n  return {\n    type: ContactFlowActionKey.DOWNLOAD,\n    value: { contactFlow }\n  }\n};\n\nconst showModalResults = (show: Boolean) => {\n  return {\n    type: ContactFlowActionKey.SHOW_CONTACT_FLOW_MODAL,\n    value: show\n  }\n};\n\nconst ContactFlowAction = {\n  download: (contactFloDto: ContactFlowDto) => {\n    return (dispatch: Dispatch) => {\n      // console.log(\"The document\", document);\n      dispatch(downloadErrorResults(null));\n      dispatch(downloadingResults(true));\n      contactFlowService.downloadContactFlow(contactFloDto)\n        .then(contactFlow => {\n          dispatch(downloadResult(contactFlow));\n        })\n        .catch(err => {\n          // console.log(\"The error\", err);\n          dispatch(downloadErrorResults(err))\n        })\n        .finally(() => {\n          dispatch(downloadingResults(false));\n        })\n    }\n  },\n  showModal: (show: Boolean) => {\n    return (dispatch: Dispatch) => {\n      dispatch(showModalResults(show));\n    }\n  }\n};\n\nexport { ContactFlowAction, ContactFlowActionKey }\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {ContactFlowActionKey} from \"../actions/contact-flow.actions\";\nimport {Reducer} from \"redux\";\n\nconst initialState = {\n    showModal: false,\n    downloading: false,\n    downloadError: null\n};\n\nconst reducer: Reducer = (state = initialState, action: any) => {\n    switch (action.type) {\n        case ContactFlowActionKey.DOWNLOADING:\n            return {\n                ...state,\n                downloading: action.value\n            };\n        case ContactFlowActionKey.DOWNLOAD_ERROR:\n            let errorMessage = null;\n\n            if (action.value && action.value.error) {\n                errorMessage = action.value.error._error.message;\n            }\n            return {\n                ...state,\n                downloadError: errorMessage\n            };\n        case ContactFlowActionKey.SHOW_CONTACT_FLOW_MODAL:\n            return {\n                ...state,\n                showModal: action.value\n            };\n        default:\n            return state;\n    }\n};\n\nexport default reducer;","import {combineReducers} from \"redux\";\n\nimport authReducer from './reducers/auth.reducer';\nimport agentsReducer from './reducers/agents.reducer';\nimport globalSettingsReducer from './reducers/global-settings.reducer';\nimport contactFlowReducer from './reducers/contact-flow.reducer';\n\nconst rootReducer = combineReducers({\n    auth: authReducer,\n    agents: agentsReducer,\n    globalSettings: globalSettingsReducer,\n    contactFlow: contactFlowReducer\n});\n\nexport default rootReducer;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nconst themeColors = {\n    mediumGray: \"#757679\",\n    primary: \"#3D4E62\",\n    turquoise: \"#00ABBA\",\n    error: \"#C22402\",\n    navBar: \"#222A33\"\n};\n\nexport default themeColors","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {createMuiTheme} from \"@material-ui/core\";\nimport themeColors from \"./colors\";\n\nconst materialTheme = new createMuiTheme({\n    spacing: 2,\n    typography: {\n        fontFamily: [\"Roboto\",\"Helvetica\",\"Arial\",\"sans-serif\"].join(\",\"),\n    },\n    colors: {\n        mediumGray: themeColors.mediumGray,\n        error: themeColors.error\n    },\n    palette: {\n        primary: {\n            main: themeColors.primary\n        },\n        secondary: {\n            main: themeColors.turquoise\n        },\n        error: {\n            main: themeColors.error\n        }\n    },\n    boxShadow: {\n        high: \"3px 8px 20px -6px rgba(0,0,0,0.35)\",\n        medium: \"2px 6px 10px -4px rgba(0,0,0,0.35)\",\n        low: \"1px 4px 8px -3px rgba(0,0,0,0.35)\"\n    },\n    overrides: {\n        MuiTableCell: {\n            stickyHeader: {\n                backgroundColor: themeColors.primary\n            },\n            head: {\n                color: \"#FFFFFF\"\n            }\n        },\n        MuiTableSortLabel: {\n            active: {\n                color: \"#FFFFFF !important\"\n            },\n            icon: {\n                color: \"#FFFFFF !important\"\n            }\n        }\n    },\n    infoCaption: {\n        color: \"#757575\",\n        fontSize: 12\n    },\n    modal: {\n        root: {\n            padding: 5\n        },\n        title: {\n            fontSize: 25,\n            padding: 0,\n            margin: 0\n        },\n        paper: {\n            padding: 20,\n            width: 300\n        },\n        inputsContainer: {\n            marginTop: 20\n        },\n        padTop: {\n            marginTop: 20\n        },\n        error: {\n            fontSize: 12,\n            color: themeColors.error\n        }\n    }\n});\n\nexport default materialTheme","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport {createBrowserHistory} from 'history';\nexport default createBrowserHistory();","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {Auth, Hub} from 'aws-amplify';\nimport history from \"../history\";\n\nclass CognitoAuth extends Component {\n  constructor(props) {\n    super(props);\n\n    // let the Hub module listen on Auth events\n    Hub.listen('auth', (data) => {\n      switch (data.payload.event) {\n        case 'signIn':\n          history.push('/agents');\n          this.setState({authState: 'signedIn', authData: data.payload.data});\n          break;\n        case 'signIn_failure':\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  componentDidMount() {\n    // we only want to do this if code isn't\n    if (!this.props.location || !this.props.location.search.startsWith(\"?code=\")) {\n      Auth.currentAuthenticatedUser().then(user => {\n        history.push('/agents');\n      }).catch(e => {\n        Auth.federatedSignIn();\n      });\n    }\n  }\n\n  render() {\n    return (\n        <div className=\"App\"/>\n    );\n  }\n}\n\nexport default CognitoAuth;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {IconButton} from \"@material-ui/core\";\nimport {Settings} from \"@material-ui/icons\";\nimport requiresAuth from \"../common/requiresAuth\";\nimport {GlobalSettingsAction} from \"../store/actions/global-settings.actions\";\n\nclass GlobalSettingsButton extends Component {\n\n    handleButtonClick = () => {\n        this.props.showGlobalSettingsModal === false ? this.props.showSettingsModal(true) : this.props.showSettingsModal(false);\n    };\n\n    render() {\n        return (\n            <IconButton color=\"inherit\" onClick={this.handleButtonClick}>\n                <Settings/>\n            </IconButton>\n        )\n    }\n}\n\nGlobalSettingsButton.propTypes = {\n    showGlobalSettingsModal: PropTypes.bool\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        showGlobalSettingsModal: state.globalSettings.showModal\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        showSettingsModal: (show) => dispatch(GlobalSettingsAction.showModal(show)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GlobalSettingsButton);","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nconst AuthRoles = {\n    ADMIN: \"Admin\",\n    MANAGER: \"Manager\"\n};\n\nexport default AuthRoles","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport {\n    AppBar,\n    Toolbar,\n    IconButton, Grid,\n    Typography, withStyles, createMuiTheme\n} from \"@material-ui/core\";\n\nimport {ExitToApp} from '@material-ui/icons';\nimport PropTypes from \"prop-types\";\nimport {AuthAction} from \"../store/actions/auth.actions\";\nimport GlobalSettingsButton from \"../global-settings/GlobalSettingsButton\";\nimport AuthRoles from \"../auth/AuthRoles\";\nimport {MuiThemeProvider} from \"@material-ui/core\";\nimport themeColors from \"../theme/colors\";\n\nconst styles = (theme) => ({\n    root: {\n        flexGrow: 1\n    },\n    logo: {\n        margin: \"5px 10px 0 0\",\n        height: 43\n    },\n    grow: {\n        flexGrow: 1\n    },\n    userInfo: {\n        marginRight: 10\n    },\n    role: {\n        fontSize: 12,\n        textAlign: \"right\",\n        fontWeight: \"bold\",\n        margin: \"4px 0 -2px 0\",\n        paddingTop: 3\n    },\n    email: {\n        fontSize: 12,\n        fontWeight: \"light\",\n        textAlign: \"right\",\n        margin: \"-2px 0 0 0\",\n        padding: 0\n    }\n});\n\nconst theme = new createMuiTheme({\n    palette: {\n        primary: {\n            main: themeColors.navBar\n        }\n    }\n});\n\nclass NavigationBar extends Component {\n\n    handleOnLogout = () => {\n        this.props.logout();\n    };\n\n    render() {\n        let {classes} = this.props;\n        return (\n            <MuiThemeProvider theme={theme}>\n                <div className={classes.root}>\n                    <AppBar position=\"static\">\n                        <Toolbar>\n                            <Grid container direction=\"row\" justify=\"space-between\" alignContent=\"center\"\n                                  alignItems=\"center\">\n                                <Grid item>\n                                    <Grid container direction=\"row\" alignItems=\"center\" alignContent=\"center\">\n                                        <Grid item>\n                                            <img alt=\"Amazon Connect Logo\" className={classes.logo}\n                                                 src={process.env.PUBLIC_URL + '/images/logo80_2x.png'}/>\n                                        </Grid>\n                                        <Grid item>\n                                            <Typography variant=\"h5\">\n                                                Amazon Connect Voicemail Management Portal\n                                            </Typography>\n                                        </Grid>\n                                    </Grid>\n                                </Grid>\n                                <Grid item>\n                                    <Grid container direction=\"row\">\n                                        <Grid item className={classes.userInfo}>\n                                            <Grid container direction=\"column\" alignContent=\"center\"\n                                                  alignItems=\"flex-end\">\n                                                <Grid item><p className={classes.role}>{this.props.userRole}</p></Grid>\n                                                <Grid item><p className={classes.email}>{this.props.userEmail}</p>\n                                                </Grid>\n                                            </Grid>\n                                        </Grid>\n                                        <Grid item>\n                                            <Grid container direction=\"row\" alignItems={\"center\"}>\n                                                <Grid item>\n                                                    <GlobalSettingsButton/>\n                                                </Grid>\n                                                <Grid item>\n                                                    <IconButton color=\"inherit\" onClick={this.handleOnLogout}>\n                                                        <ExitToApp/>\n                                                    </IconButton>\n                                                </Grid>\n                                            </Grid>\n                                        </Grid>\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                        </Toolbar>\n                    </AppBar>\n                </div>\n            </MuiThemeProvider>\n        );\n    }\n}\n\nNavigationBar.propTypes = {\n    logout: PropTypes.func\n};\n\nconst mapStateToProps = (state) => {\n    let role = \"\";\n    if (!state.auth.user) {\n        return {\n            userEmail: null,\n            userRole: null\n        }\n    }\n\n    let roles = state.auth.user[\"roles\"];\n    if (roles && roles.includes(AuthRoles.MANAGER)) {\n        role = \"Manager\";\n    }\n\n    if (roles && roles.includes(AuthRoles.ADMIN)) {\n        role = \"Administrator\"\n    }\n\n    return {\n        userEmail: state.auth.user[\"email\"],\n        userRole: role\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        logout: () => dispatch(AuthAction.logout()),\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(NavigationBar))","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, CircularProgress, withStyles} from \"@material-ui/core\";\n\nconst styles = (theme) => ({\n    progress: {\n        marginLeft: 5,\n        verticalAlign: \"sub\"\n    }\n});\n\nclass AsyncButton extends Component {\n\n    render() {\n        let {classes} = this.props;\n        const {color, onClick, className, disabled, type} = this.props;\n        return(\n            <Button type={type || \"button\"} color={color} onClick={onClick} disabled={(disabled || this.props.loading)} className={className} variant='contained'>\n                <span className={classes.span}>{this.props.children} {this.props.loading ? <CircularProgress className={classes.progress} color=\"secondary\" size=\"1rem\"/> : null} </span>\n            </Button>\n        )\n    }\n\n}\n\nAsyncButton.propTypes = {\n    loading: PropTypes.bool\n};\n\nexport default withStyles(styles)(AsyncButton);","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {Cancel, Search} from \"@material-ui/icons\";\nimport {Grid, TextField, withStyles} from \"@material-ui/core\";\nimport PropTypes from 'prop-types'\n\nconst styles = (theme) => ({\n    textField: {\n        width: 220\n    },\n    search: {\n        marginRight: 5\n    },\n    clearSearch: {\n        width: 18,\n        marginBottom: 3,\n        marginLeft: -15,\n        color: \"rgba(0,0,0,0.25)\",\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n        zIndex: 1\n    }\n});\n\nclass SearchTextField extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchValue: \"\"\n        }\n    }\n\n    handleSearchChange = (event) => {\n        this.updateSearch(event.target.value)\n    };\n\n    updateSearch(searchText) {\n        this.setState({\n            ...this.state,\n            searchValue: searchText\n        }, () => {\n            if (this.props.searchChangeFunc) {\n                this.props.searchChangeFunc(this.state.searchValue)\n            }\n        });\n    }\n\n    render() {\n        let classes = this.props.classes;\n        return (\n            <Grid container direction={\"row\"} alignItems={\"flex-end\"} alignContent={\"center\"}>\n                <Search className={classes.search}/>\n                <Grid item>\n                    <TextField\n                        className={classes.textField}\n                        placeholder={\"Search\"}\n                        name=\"search\"\n                        value={this.state.searchValue}\n                        onChange={this.handleSearchChange}\n                    />\n                </Grid>\n                {this.props.showClearButton ?\n                    <Cancel className={classes.clearSearch} onClick={() => {\n                        this.updateSearch(\"\")\n                    }}/> :\n                    null\n                }\n            </Grid>\n        )\n    }\n\n}\n\nSearchTextField.propTypes = {\n    searchChangeFunc: PropTypes.func,\n    showClearButton: PropTypes.bool\n};\n\nexport default withStyles(styles)(SearchTextField);","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport {withStyles} from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport PropTypes from 'prop-types'\nimport {\n    Paper, Table, TableHead, TableCell, TableRow, TableBody, TableSortLabel, Grid\n} from \"@material-ui/core\";\n\nimport {ArrowDropDown, Check, KeyboardArrowLeft, KeyboardArrowRight} from \"@material-ui/icons\";\nimport {AgentsAction, AgentsSortKey, AgentsSortOrder} from \"../store/actions/agents.actions\";\nimport AsyncButton from \"../common/components/AsyncButton\";\nimport SearchTextField from \"../common/SearchTextField\";\nimport {GlobalSettingsAction} from \"../store/actions/global-settings.actions\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst styles = (theme) => ({\n    '@global': {\n        '.MuiTableSortLabel-root': {\n            \"&:hover\": {\n                color: \"#FFFFFF\"\n            },\n            \"&:focus\": {\n                color: \"#FFFFFF\"\n            }\n        },\n        \".MuiTableCell-head\": {\n            fontWeight: 150\n        }\n    },\n    topBar: {\n        margin: 15\n    },\n    search: {\n        marginRight: 5\n    },\n    root: {\n        width: '100%',\n        overflowX: 'auto',\n    },\n    table: {\n        minWidth: 650,\n    },\n    delivery: {\n        marginRight: 10\n    },\n    tableCell: {\n        borderRight: \"1px solid white\"\n    },\n    clearSearch: {\n        width: 15,\n        marginBottom: 3,\n        marginLeft: -15,\n        color: \"rgba(0,0,0,0.25)\",\n        \"&:hover\": {\n            cursor: \"pointer\"\n        },\n        zIndex: 1\n    },\n    checkDisable: {\n        color: \"#e2e2e2\"\n    },\n    navigationBar: {\n        float: \"right\"\n    },\n    navButton: {\n    },\n    syncButton: {\n        margin: \"0 10px 0 0\"\n    }\n});\n\nconst headerCells = [\n    {id: 'username', numeric: false, disablePadding: false, label: 'Username', sortable: true},\n    {id: 'extension', numeric: false, disablePadding: false, label: 'Extension', sortable: true},\n    {id: 'encrypt', numeric: false, disablePadding: false, label: 'Encrypt', sortable: false},\n    {id: 'transcribe', numeric: false, disablePadding: false, label: 'Transcribe', sortable: false},\n    {id: 'deliveryOptions', numeric: false, disablePadding: false, label: 'Delivery Options', sortable: false}\n];\n\nclass AgentsTable extends Component {\n\n    constructor(props) {\n        super(props);\n        this.sortKey = \"firstName\";\n        this.sortOrder = \"desc\";\n        this.searchTextField = null;\n        this.state = {\n            syncOpen: false\n        }\n    }\n\n    componentDidMount() {\n        this.props.getAgents();\n        this.props.fetchGlobalSettings();\n    }\n\n    sortBy = (id) => {\n        console.log(\"Should Sort\", id);\n        let header = headerCells.filter(item => item.id === id)[0];\n        if (header.sortable) {\n            this.props.sortAgents(id, (this.props.sortOrder === AgentsSortOrder.ASC) ? AgentsSortOrder.DESC : AgentsSortOrder.ASC)\n        }\n    };\n\n    handleSearchChange = (searchText) => {\n        this.props.filterAgents(searchText);\n    };\n\n    showAgent = (agent) => {\n        this.props.showAgentModal(true, agent);\n    };\n\n    handleSync = () => {\n        this.setState({syncOpen: false});\n        this.props.syncAgents();\n    };\n\n    render() {\n        let classes = this.props.classes;\n        return (\n            <div className={this.props.className}>\n                <Paper className={classes.root}>\n                    <div className={classes.topBar}>\n                        <Grid container justify={\"space-between\"} alignItems={\"flex-end\"} direction={\"row\"}>\n                            <Grid item className={classes.searchBox}>\n                                <SearchTextField\n                                    ref={(c) => this.searchTextField = c }\n                                    showClearButton={this.props.searchFilter !== \"\"}\n                                    searchChangeFunc={this.handleSearchChange}/>\n                            </Grid>\n                            <Grid item>\n                                <Button color=\"secondary\" className={classes.syncButton} onClick={() => this.setState({syncOpen: true})}>\n                                    Sync Agents\n                                </Button>\n                                <AsyncButton loading={this.props.loading} color={\"primary\"} onClick={() => {\n                                    this.props.getAgents();\n                                    if (this.searchTextField) {\n                                        this.searchTextField.updateSearch(\"\")\n                                    }\n                                }} >Refresh</AsyncButton>\n                            </Grid>\n                        </Grid>\n                    </div>\n                    <Dialog\n                        open={this.state.syncOpen}\n                        onClose={() => this.setState({syncOpen: false})}\n                        aria-labelledby=\"alert-dialog-title\"\n                        aria-describedby=\"alert-dialog-description\"\n                    >\n                        <DialogTitle id=\"alert-dialog-title\">Sync Amazon Connect Agents?</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText id=\"alert-dialog-description\">\n                                This process will sync all users in Amazon Connect to the VM portal.\n                            </DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={() => this.setState({syncOpen: false})} color=\"primary\">\n                                Cancel\n                            </Button>\n                            <Button onClick={this.handleSync} color=\"primary\" autoFocus>\n                                Sync\n                            </Button>\n                        </DialogActions>\n                    </Dialog>\n\n                    <Table className={classes.table} stickyHeader aria-label=\"sticky table\" size=\"small\">\n                        <TableHead>\n                            <TableRow>\n                                {headerCells.map(headerCell => (\n                                    <TableCell className={classes.tableCell}\n                                        key={headerCell.id}\n                                        align={headerCell.numeric ? 'right' : 'left'}\n                                        padding={headerCell.disablePadding ? 'none' : 'default'}>\n                                        <TableSortLabel\n                                            onClick={() => this.sortBy(headerCell.id)}\n                                            key={headerCell.id}\n                                            hideSortIcon={!headerCell.sortable}\n                                            active={this.props.sortKey === headerCell.id}\n                                            direction={this.props.sortOrder}\n                                            IconComponent={ArrowDropDown}>\n                                            {headerCell.label}\n                                        </TableSortLabel>\n                                    </TableCell>\n                                ))}\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {this.props.agents.map(agent => (\n                                <TableRow key={agent.userId} hover onClick={() => {this.showAgent(agent)}}>\n                                    <TableCell align=\"left\">{agent.username}</TableCell>\n                                    <TableCell align=\"left\">{agent.extension}</TableCell>\n                                    <TableCell align=\"left\">{\n                                        this.props.encryptVoicemail ?\n                                            <Check fontSize=\"inherit\"/> : \n                                                ( agent.encryptVoicemail ? \n                                                    <Check fontSize=\"inherit\"/> : null ) }\n                                    </TableCell>\n                                    <TableCell align=\"left\">{\n                                        agent.transcribeVoicemail ?\n                                            <Check className={this.props.transcribeVoicemail ? null : classes.checkDisable} fontSize=\"inherit\"/> :\n                                            null}\n                                    </TableCell>\n                                    <TableCell align=\"left\">\n                                        <span\n                                            className={classes.delivery}>{agent.deliverEmail ? \"Email\" : \"\"}</span>\n                                        <span\n                                            className={classes.delivery}>{agent.deliverSMS ? `SMS: ${agent.deliverSMSPhoneNumber}` : \"\"}</span>\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n\n                    <div className={classes.navigationBar}>\n                        <Button disabled={this.props.page.prev.length === 0} onClick={() => {\n                            this.props.getAgents(this.props.page.prev[this.props.page.prev.length - 1]);\n                        }}><KeyboardArrowLeft className={classes.navButton}/></Button>\n                        <Button disabled={this.props.page.next.length === 0} onClick={() => {\n                            this.props.getAgents(this.props.page.next[0]);\n                        }}><KeyboardArrowRight className={classes.navButton}/></Button>\n                    </div>\n                </Paper>\n            </div>\n        )\n    }\n}\n\nAgentsTable.propTypes = {\n    agents: PropTypes.array,\n    loading: PropTypes.bool,\n    sortKey: PropTypes.string,\n    sortOrder: PropTypes.string,\n    searchFiler: PropTypes.string,\n    getAgents: PropTypes.func,\n    sortAgents: PropTypes.func,\n    filterAgents: PropTypes.func\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        agents: state.agents.agents,\n        loading: state.agents.loading,\n        sortKey: state.agents.sortKey,\n        sortOrder: state.agents.sortOrder,\n        searchFilter: state.agents.filter,\n        transcribeVoicemail: state.globalSettings.transcribeVoicemail,\n        encryptVoicemail: state.globalSettings.encryptVoicemail,\n        page: state.agents.page\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        getAgents: (next) => dispatch(AgentsAction.getAgents(next)),\n        sortAgents: (sortKey, sortOrder) => dispatch(AgentsAction.sortAgents(sortKey, sortOrder)),\n        filterAgents: (filter) => dispatch(AgentsAction.filterAgents(filter)),\n        showAgentModal: (show, agent) => dispatch(AgentsAction.showAgent(show, agent)),\n        fetchGlobalSettings: () => dispatch(GlobalSettingsAction.fetchSettings()),\n        syncAgents: () => dispatch(AgentsAction.syncAgents())\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(AgentsTable));","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {\n    withStyles,\n    Grid,\n    FormControl,\n    InputLabel, Input\n} from \"@material-ui/core\";\nimport AsyncButton from \"../common/components/AsyncButton\";\nimport {ContactFlowAction} from \"../store/actions/contact-flow.actions\";\nimport {connect} from \"react-redux\";\nimport AuthRoles from \"../auth/AuthRoles\";\n\nconst styles = (theme) => ({\n    ...theme.modal,\n    root: {\n        padding: 0\n    }\n});\n\nclass ContactFlow extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            welcomeMessage: \"Welcome\",\n            defaultErrorMessage: \"Thank you and have a wonderful day\",\n            maxVoicemailDuration: 60,\n            durationType: \"SECOND\",\n            fallbackQueueName: \"BasicQueue\",\n            errorLoopCount: 3\n        }\n    }\n\n    handleDownload = () => {\n        // console.log(\"Download\");\n        let settings = {\n            welcomeMessage: this.state.welcomeMessage,\n            defaultErrorMessage: this.state.defaultErrorMessage,\n            maxVoicemailDuration: this.state.maxVoicemailDuration,\n            durationType: \"SECOND\",\n            fallbackQueueName: this.state.fallbackQueueName,\n            errorLoopCount: this.state.errorLoopCount\n        };\n        this.props.download(settings);\n    };\n\n    handleInputChange = (event) => {\n        event.preventDefault();\n        // console.log(event.target);\n        // console.log(event.target.id, event.target.name);\n        this.setState({\n            ...this.state,\n            [event.target.name]: event.target.value\n        });\n    };\n\n    render() {\n\n        let classes = this.props.classes;\n\n        return(\n            <div className={classes.root}>\n                <h6 className={classes.title}>Generate Contact Flow</h6>\n                <Grid className={classes.inputsContainer} container direction={\"column\"}>\n                    <FormControl>\n                        <InputLabel type={\"text\"} htmlFor=\"welcome-message\">Welcome Message</InputLabel>\n                        <Input id=\"welcome-message\" disableUnderline={true} readOnly={false}  name={\"welcomeMessage\"}  value={this.state.welcomeMessage} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"fallback-queue-name\">Fallback Queue</InputLabel>\n                        <Input id=\"fallback-queue-name\" disableUnderline={true} readOnly={false} name={\"fallbackQueueName\"} value={this.state.fallbackQueueName} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel type={\"text\"} htmlFor=\"default-error-message\">Default Error Message</InputLabel>\n                        <Input id=\"default-error-message\" disableUnderline={true} readOnly={false}  name={\"defaultErrorMessage\"}  value={this.state.defaultErrorMessage} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"max-vm-duration\">Max Voicemail Duration (sec.)</InputLabel>\n                        <Input type={\"number\"} inputProps={{ min: \"1\", max: \"120\", step: \"1\" }} id=\"max-vm-duration\" disableUnderline={true} readOnly={false} name={\"maxVoicemailDuration\"}  value={this.state.maxVoicemailDuration} onChange={this.handleInputChange}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"loop-count\">Incorrect Extension Loop Count</InputLabel>\n                        <Input type={\"number\"} inputProps={{ min: \"0\", max: \"10\", step: \"1\" }} id=\"loop-count\" disableUnderline={true} readOnly={false} name={\"errorLoopCount\"} value={this.state.errorLoopCount} onChange={this.handleInputChange}/>\n                    </FormControl>\n                </Grid>\n                {(this.props.downloadError) ?\n                    <p className={classes.error}>\n                        {this.props.downloadError}\n                    </p> :\n                    null\n                }\n                <Grid className={classes.padTop} container spacing={5} direction=\"row\">\n                    <Grid item>\n                        <AsyncButton loading={this.props.downloading} color=\"primary\" variant=\"contained\" onClick={this.handleDownload} disabled={this.props.userRole != \"Administrator\"}>Download</AsyncButton>\n                    </Grid>\n                </Grid>\n            </div>\n        )\n\n    }\n\n}\n\nconst mapStateToProps = (state) => {\n    let role = \"\";\n    if (!state.auth.user) {\n        return {\n            userEmail: null,\n            userRole: null\n        }\n    }\n\n    let roles = state.auth.user[\"roles\"];\n    if (roles.includes(AuthRoles.MANAGER)) {\n        role = \"Manager\";\n    }\n\n    if (roles.includes(AuthRoles.ADMIN)) {\n        role = \"Administrator\"\n    }\n\n    return {\n        downloading: state.contactFlow.downloading,\n        downloadError: state.contactFlow.downloadError,\n        userRole: role\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        showModal: (show) => dispatch(ContactFlowAction.showModal(show)),\n        download: (contactFlowDto) => dispatch(ContactFlowAction.download(contactFlowDto))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(ContactFlow))\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {Paper, withStyles, Button, Grid, FormControlLabel, Checkbox, TextField} from \"@material-ui/core\";\nimport AsyncButton from \"../common/components/AsyncButton\";\nimport {GlobalSettingsAction} from \"../store/actions/global-settings.actions\";\nimport {connect} from \"react-redux\";\nimport PropTypes from 'prop-types';\nimport ContactFlow from \"../contact-flow/ContactFlow\";\nimport AuthRoles from \"../auth/AuthRoles\";\n\nconst styles = (theme) => ({\n    root: {\n        padding: 0\n    },\n    title: {\n        fontSize: 25,\n        padding: 0,\n        margin: 0\n    },\n    paper: {\n        padding: 20,\n        width: 450\n    },\n    checkBox: {\n        marginTop: 15,\n        marginBottom: 15\n    },\n    deliveryEmail: {\n        marginTop: 15\n    },\n    infoCaption: theme.infoCaption,\n    spacer: {\n        marginTop: \"20px\",\n        marginBottom: \"10px\",\n        borderBottom: \"1px solid rgb(220, 220, 220, 0.5)\"\n    }\n});\n\nclass GlobalSettings extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            deliveryEmail: \"\",\n            transcribeEnabled: null,\n            encryptionEnabled: null\n        }\n    }\n\n    componentDidMount() {\n        this.props.fetch();\n    }\n\n    handleEventInputChange = (event) => {\n        let {name} = event.target;\n        if (name === \"deliveryEmail\") {\n            this.setState({\n                ...this.state,\n                [event.target.name]: event.target.value\n            })\n        } else {\n            this.setState({\n                ...this.state,\n                [event.target.name]: event.target.checked\n            })\n        }\n\n    };\n\n    handleSave = () => {\n        let settings = {\n            transcribeVoicemail: this.state.transcribeEnabled !== null ? this.state.transcribeEnabled : this.props.transcribeVoicemail,\n            encryptVoicemail: this.state.encryptionEnabled !== null ? this.state.encryptionEnabled : this.props.encryptVoicemail,\n            deliveryEmail: this.state.deliveryEmail === \"\" ? this.props.deliveryEmail : this.state.deliveryEmail,\n            availableSMSCountries: this.props.availableSMSCountries\n        };\n        this.props.save(settings);\n        this.props.showModal(false);\n    };\n\n    render() {\n\n        let classes = this.props.classes;\n\n        let transcribe = this.state.transcribeEnabled;\n        if (this.state.transcribeEnabled === null) {\n            transcribe = this.props.transcribeVoicemail\n        }\n\n        let encrypt = this.state.encryptionEnabled;\n        if (this.state.encryptionEnabled === null) {\n            encrypt = this.props.encryptVoicemail\n        }\n\n        return (\n            <div className={classes.root}>\n                <h6 className={classes.title}>Global Configurations</h6>\n                <div className={classes.checkBox}>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                name=\"transcribeEnabled\"\n                                id=\"transcribe\"\n                                disabled={this.props.loading || this.props.saving}\n                                onChange={this.handleEventInputChange}\n                                checked={transcribe}\n                                color=\"primary\"/>\n                        }\n                        label=\"Allow Voicemail Transcriptions\"/>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                name=\"encryptionEnabled\"\n                                id=\"encrypt\"\n                                disabled={this.props.loading || this.props.saving}\n                                onChange={this.handleEventInputChange}\n                                checked={encrypt}\n                                color=\"primary\"/>\n                        }\n                        label=\"Enforce Voicemail Encryption\"/>\n                    <TextField\n                        name=\"deliveryEmail\"\n                        disabled={this.props.loading || this.props.saving}\n                        className={classes.deliveryEmail}\n                        fullWidth={true}\n                        placeholder={this.props.deliveryEmail}\n                        onChange={this.handleEventInputChange}\n                        value={this.state.deliveryEmail || this.props.deliveryEmail}\n                        label={\"Delivery Email\"}\n                    />\n                    <p className={classes.infoCaption}>Important: Delivery Email must be verified via Amazon Simple\n                        Email Service before emails can be delivered</p>\n                </div>\n                <Grid container spacing={5} direction=\"row\">\n                    <Grid item>\n                        <Button color=\"secondary\" onClick={() => {\n                            this.props.showModal(false)\n                        }}>Cancel</Button>\n                    </Grid>\n                    <Grid item>\n                        <AsyncButton loading={this.props.saving} color=\"primary\" variant=\"contained\" disabled={this.props.userRole != \"Administrator\"} onClick={this.handleSave}>Save</AsyncButton>\n                    </Grid>\n                </Grid>\n                <div className={classes.spacer}></div>\n                <ContactFlow/>\n            </div>\n        )\n    }\n}\n\nGlobalSettings.propTypes = {\n    loading: PropTypes.bool,\n    deliveryEmail: PropTypes.string,\n    transcribeVoicemail: PropTypes.bool,\n    encryptVoicemail: PropTypes.string,\n    saving: PropTypes.bool,\n    fetch: PropTypes.func,\n    showModal: PropTypes.func,\n    save: PropTypes.func\n};\n\nconst mapStateToProps = (state) => {\n    let role = \"\";\n    if (!state.auth.user) {\n        return {\n            userEmail: null,\n            userRole: null\n        }\n    }\n\n    let roles = state.auth.user[\"roles\"];\n    if (roles.includes(AuthRoles.MANAGER)) {\n        role = \"Manager\";\n    }\n\n    if (roles.includes(AuthRoles.ADMIN)) {\n        role = \"Administrator\"\n    }\n\n    return {\n        loading: state.globalSettings.loading,\n        deliveryEmail: state.globalSettings.deliveryEmail || \"\",\n        transcribeVoicemail: state.globalSettings.transcribeVoicemail,\n        encryptVoicemail: state.globalSettings.encryptVoicemail,\n        availableSMSCountries: state.globalSettings.availableSMSCountries,\n        saving: state.globalSettings.saving,\n        userRole: role\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetch: () => dispatch(GlobalSettingsAction.fetchSettings()),\n        showModal: (show) => dispatch(GlobalSettingsAction.showModal(show)),\n        save: (settings) => dispatch(GlobalSettingsAction.saveSettings(settings))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(GlobalSettings))","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {\n    Paper, withStyles,\n    Button, Grid,\n    FormControlLabel, Checkbox, TextField, FormControl, Input, InputLabel\n} from \"@material-ui/core\";\nimport {connect} from \"react-redux\";\nimport AsyncButton from \"../common/components/AsyncButton\";\nimport {AgentsAction} from \"../store/actions/agents.actions\";\nimport PropTypes from 'prop-types';\nimport MuiPhoneInput from 'material-ui-phone-number';\nimport PhoneNumber from 'awesome-phonenumber';\n\nconst styles = (theme) => ({\n    ...theme.modal,\n    userInfo: {\n        marginTop: 20\n    },\n    paper: {\n        padding: 20,\n        width: 350\n    },\n});\n\nconst FormControlCheckBox = ({label, checked, onChange, name, id, color = \"primary\"}) => {\n    return (\n        <FormControlLabel\n            control={\n                <Checkbox\n                    name={name}\n                    id={id}\n                    onChange={onChange}\n                    checked={checked}\n                    color=\"primary\"/>\n            }\n            label={label}/>\n    )\n};\n\nclass AgentSettings extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            transcribeVoicemail: null,\n            encryptVoicemail: null,\n            deliverSMS: null,\n            deliverEmail: null,\n            extensionNumber: null,\n            deliverSMSPhoneNumber: null,\n            validationError: null\n        }\n    }\n\n    handleCheckBoxChange = (event) => {\n        this.setState({\n            ...this.state,\n            [event.target.name]: event.target.checked\n        })\n    };\n\n    handleExtensionNumberChange = (event) => {\n        const re = /^[0-9\\b]+$/;\n        if (event.target.value === '' || re.test(event.target.value)) {\n            this.setState({\n                ...this.state,\n                [event.target.name]: event.target.value\n            })\n        }\n    };\n\n    phoneNumberInputChange = (phoneNumber, data) => {\n        this.setState({\n            ...this.state,\n            countryData: data,\n            deliverSMSPhoneNumber: phoneNumber\n        })\n    };\n\n    formValueForKey(key, defaultValue) {\n        let result = this.state[key];\n        if (result === null) {\n            result = defaultValue\n        }\n        return result;\n    }\n\n    handleSave = () => {\n        let {transcribeVoicemail, encryptVoicemail, deliverSMS, deliverEmail, extensionNumber, deliverSMSPhoneNumber, } = this.state;\n\n        deliverSMS = (deliverSMS !== null) ? deliverSMS : this.props.agent.deliverSMS;\n        deliverSMSPhoneNumber = (deliverSMSPhoneNumber !== null) ? deliverSMSPhoneNumber : this.props.agent.deliverSMSPhoneNumber;\n        extensionNumber = (extensionNumber !== null) ? extensionNumber : this.props.agent.extension;\n        deliverEmail = (deliverEmail !== null) ? deliverEmail : this.props.agent.deliverEmail;\n        encryptVoicemail = (encryptVoicemail != null) ? encryptVoicemail : this.props.agent.encryptVoicemail;\n        transcribeVoicemail = (transcribeVoicemail != null) ? transcribeVoicemail : this.props.agent.transcribeVoicemail;\n\n        if (deliverSMS) {\n            let phone = new PhoneNumber(deliverSMSPhoneNumber);\n            if (!phone.isValid()) {\n                this.setState({\n                    ...this.state,\n                    validationError: \"Please provide a valid phone number.\"\n                });\n                return;\n            }\n            deliverSMSPhoneNumber = phone.getNumber();\n        } else {\n            deliverSMSPhoneNumber = \"\";\n        }\n\n        this.props.updateAgent(\n            this.props.agent.userId,\n            extensionNumber,\n            deliverSMSPhoneNumber,\n            deliverSMS,\n            deliverEmail,\n            encryptVoicemail,\n            transcribeVoicemail\n        );\n    };\n\n    render() {\n        let classes = this.props.classes;\n\n        let transcribe = this.formValueForKey(\"transcribeVoicemail\", this.props.agent.transcribeVoicemail);\n        let encrypt = this.formValueForKey(\"encryptVoicemail\", this.props.agent.encryptVoicemail);\n        let deliverEmail = this.formValueForKey(\"deliverEmail\", this.props.agent.deliverEmail);\n        let deliverSMS = this.formValueForKey(\"deliverSMS\", this.props.agent.deliverSMS);\n        let extensionNumber = this.formValueForKey(\"extensionNumber\", this.props.agent.extension);\n        let deliverSMSPhoneNumber = this.formValueForKey(\"deliverSMSPhoneNumber\", this.props.agent.deliverSMSPhoneNumber);\n\n        return (\n            <div>\n                <h6 className={classes.title}>Agent Voicemail Settings</h6>\n                <Grid className={classes.userInfo} container direction={\"column\"}>\n                    <FormControl>\n                        <InputLabel htmlFor=\"agent-name\">Name</InputLabel>\n                        <Input id=\"agent-name\" disableUnderline={true} readOnly={true} value={this.props.agent.firstName + \" \" + this.props.agent.lastName}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"phone-type\">Email</InputLabel>\n                        <Input id=\"agent-email\" disableUnderline={true} readOnly={true} value={this.props.agent.email ? this.props.agent.email : this.props.agent.username}/>\n                    </FormControl>\n                    <FormControl>\n                        <InputLabel htmlFor=\"phone-type\">Phone Type</InputLabel>\n                        <Input id=\"phone-type\" disableUnderline={true} readOnly={true} value={this.props.agent.phoneType}/>\n                    </FormControl>\n                    {this.props.agent.phoneType === \"Desk Phone\" ?\n                        <FormControl>\n                            <InputLabel htmlFor=\"phone-number\">Phone Number</InputLabel>\n                            <Input id=\"phone-number\" disableUnderline={true} readOnly={true} value={this.props.agent.phoneNumber}/>\n                        </FormControl> : null\n                    }\n                </Grid>\n                <div>\n                    <Grid className={classes.padTop} container direction=\"row\" justify=\"flex-start\">\n                        <Grid item>\n                            <FormControlCheckBox label=\"Transcribe\" name=\"transcribeVoicemail\" id=\"transcribe\"\n                                                 onChange={this.handleCheckBoxChange} checked={transcribe}/>\n                        </Grid>\n                        <Grid item>\n                            <FormControlCheckBox label=\"Encrypt\" name=\"encryptVoicemail\" id=\"encrypt\"\n                                                 onChange={this.handleCheckBoxChange} checked={encrypt}/>\n                        </Grid>\n                    </Grid>\n                    <TextField\n                        name=\"extensionNumber\"\n                        inputProps={{ maxlength: \"5\" }}\n                        disabled={this.props.loading || this.props.saving}\n                        className={classes.textField}\n                        fullWidth={true}\n                        onChange={this.handleExtensionNumberChange}\n                        value={extensionNumber || \"\"}\n                        label={\"Extension\"}/>\n                    <p>Delivery Options</p>\n                    <Grid container direction=\"column\" justify=\"flex-start\">\n                        <Grid item>\n                            <FormControlCheckBox label=\"Email\" name=\"deliverEmail\" id=\"deliverEmail\"\n                                                 onChange={this.handleCheckBoxChange} checked={deliverEmail}/>\n                        </Grid>\n                        <Grid item>\n                            <FormControlCheckBox label=\"SMS\" name=\"deliverSMS\" id=\"deliverSMS\"\n                                                 onChange={this.handleCheckBoxChange} checked={deliverSMS}/>\n                        </Grid>\n                    </Grid>\n                    {deliverSMS ?\n                        <MuiPhoneInput\n                            placeholder=\"Phone Number for SMS\"\n                            onChange={this.phoneNumberInputChange}\n                            defaultCountry={'us'}\n                            disableAreaCodes={true}\n                            onlyCountries={this.props.availableSMSCountries}\n                            countryCodeEditable={false}\n                            autoFormat={true}\n                            value={deliverSMSPhoneNumber || \"\"}\n                        /> : null\n                    }\n                </div>\n                <p>{}</p>\n                {(this.props.agentUpdateError || this.state.validationError) ?\n                    <p className={classes.error}>\n                        {this.props.agentUpdateError || this.state.validationError}\n                    </p> :\n                    null\n                }\n                <Grid container spacing={5} direction=\"row\">\n                    <Grid item>\n                        <Button color=\"secondary\" onClick={() => {\n                            this.props.showAgent(false)\n                        }}>Cancel</Button>\n                    </Grid>\n                    <Grid item>\n                        <AsyncButton loading={this.props.agentUpdateInProgress} color=\"primary\" variant=\"contained\"\n                                     onClick={this.handleSave}>Save</AsyncButton>\n                    </Grid>\n                </Grid>\n            </div>\n        )\n    }\n}\n\nAgentSettings.propTypes = {\n    showAgent: PropTypes.func\n};\n\nconst mapStateToProps = (state) => {\n    let {agent} = state.agents;\n    return {\n        agent: agent,\n        availableSMSCountries: state.globalSettings.availableSMSCountries,\n        agentUpdateError: state.agents.updateError,\n        agentUpdateInProgress: state.agents.updateInProgress\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        showAgent: (show, agent) => dispatch(AgentsAction.showAgent(show, agent)),\n        updateAgent: (\n            agentId,\n            extensionNumber,\n            deliverSMSPhoneNumber,\n            deliverSMS,\n            deliverEmail,\n            encryptVoicemail,\n            transcribeVoicemail) => dispatch(AgentsAction.updateAgent(\n            agentId, extensionNumber, deliverSMSPhoneNumber, deliverSMS, deliverEmail,\n            encryptVoicemail, transcribeVoicemail\n        ))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(AgentSettings))\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport NavigationBar from \"../navigation/NavigationBar\";\nimport requiresAuth from \"../common/requiresAuth\";\n\nclass AgentsNoAuth extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {}\n    }\n\n    render() {\n        return (\n            <div>\n                <NavigationBar/>\n                <p> The user you logged in with is not valid. Log in again and contact your administrator if you continue to see an issue.</p>\n            </div>\n        )\n    }\n}\n\nexport default AgentsNoAuth;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux';\nimport {AuthAction} from \"../store/actions/auth.actions\";\nimport NavigationBar from \"../navigation/NavigationBar\";\nimport {AgentsAction} from \"../store/actions/agents.actions\";\nimport AgentsTable from \"./AgentsTable\";\nimport {Fade, Dialog, DialogContent, withStyles, Backdrop} from \"@material-ui/core\";\nimport GlobalSettings from \"../global-settings/GlobalSettings\";\nimport {GlobalSettingsAction} from \"../store/actions/global-settings.actions\";\nimport AgentSettings from \"./AgentSettings\";\nimport {ContactFlowAction} from \"../store/actions/contact-flow.actions\";\nimport ContactFlow from \"../contact-flow/ContactFlow\";\nimport requiresAuth from \"../common/requiresAuth\";\nimport AgentsNoAuth from './AgentsNoAuth';\nimport AuthRoles from \"../auth/AuthRoles\";\n\nconst styles = (theme) => ({\n    agentsTable: {\n        margin: 25\n    },\n    modal: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        border: \"1px solid black\"\n    },\n    noFocus: {\n        padding: theme.spacing(2, 4, 3),\n        \"&:focus\": {\n            outlineWidth: \"0 !important\",\n            outlineStyle: \"none\"\n        }\n    }\n});\n\nclass Agents extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {}\n    }\n\n    render() {\n        let classes = this.props.classes;\n        if (this.props.role === \"\") {\n            return (\n                <div>\n                    <NavigationBar/>\n                    <p> The user you logged in with is not in the \"Manager\" Cognito User Pool group. You must be a member of this group to view this page.</p>\n                </div>\n            )\n        }\n\n        return (\n            <div>\n                <NavigationBar/>\n                <AgentsTable className={classes.agentsTable}/>\n                <Dialog\n                    scroll=\"paper\"\n                    disableAutoFocus={true}\n                    open={this.props.showGlobalSettingsModal}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    onClose={() => {\n                        this.props.showSettings(false)\n                    }}>\n                    <Fade in={this.props.showGlobalSettingsModal}>\n                        <DialogContent>\n                            <GlobalSettings/>\n                        </DialogContent>\n                    </Fade>\n                </Dialog>\n                <Dialog\n                    scroll=\"paper\"\n                    disableAutoFocus={true}\n                    open={this.props.showAgentSettings}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    onClose={() => {\n                        this.props.showAgentModal(false)\n                    }}>\n                    <Fade in={this.props.showAgentSettings}>\n                        <DialogContent>\n                            <AgentSettings/>\n                        </DialogContent>\n                    </Fade>\n                </Dialog>\n                <Dialog\n                    scroll=\"paper\"\n                    disableAutoFocus={true}\n                    open={this.props.showContactFlowModal}\n                    closeAfterTransition\n                    BackdropComponent={Backdrop}\n                    onClose={() => {\n                        this.props.showContactFlow(false)\n                    }}>\n                    <Fade in={this.props.showContactFlowModal}>\n                        <DialogContent>\n                            <ContactFlow/>\n                        </DialogContent>\n                    </Fade>\n                </Dialog>\n            </div>\n        )\n    }\n}\n\nAgents.propTypes = {\n    logout: PropTypes.func,\n    showGlobalSettingsModal: PropTypes.bool,\n};\n\nconst mapStateToProps = (state) => {\n    let role = \"\";\n    if (state.auth.user) {\n\n        let roles = state.auth.user[\"roles\"];\n        if (roles && roles.includes(AuthRoles.MANAGER)) {\n            role = \"Manager\";\n        }\n\n        if (roles && roles.includes(AuthRoles.ADMIN)) {\n            role = \"Administrator\"\n        }\n    }\n\n    return {\n        showGlobalSettingsModal: state.globalSettings.showModal,\n        agents: state.agents.agents,\n        agentsSortKey: state.agents.sortKey,\n        agentsSortOrder: state.agents.sortOrder,\n        showAgentSettings: state.agents.showAgentSettings,\n        agent: state.agents.agent,\n        showContactFlowModal: state.contactFlow.showModal,\n        contactFlowDownloading: state.contactFlow.downloading,\n        role: role\n    }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        logout: () => dispatch(AuthAction.logout()),\n        getAgents: () => dispatch(AgentsAction.getAgents()),\n        sortAgents: (sortKey, sortOrder) => dispatch(AgentsAction.sortAgents(sortKey, sortOrder)),\n        showSettings: (show) => dispatch(GlobalSettingsAction.showModal(show)),\n        showAgentModal: (show, agent) => dispatch(AgentsAction.showAgent(show, agent)),\n        showContactFlow: (show) => dispatch(ContactFlowAction.showModal(show)),\n        downloadContactFlow: (contactFlowDto) => dispatch(ContactFlowAction.download(contactFlowDto))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(requiresAuth(Agents, AgentsNoAuth)));","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport history from \"../history\";\nimport {Auth} from \"aws-amplify\";\nimport {AuthAction} from \"../store/actions/auth.actions\";\n\nexport default function (ComposedComponent, UnauthedComponent) {\n    class Authenticate extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                authState: 'loading'\n            }\n        }\n\n        componentDidMount() {\n            this._checkAndRedirect();\n        }\n\n        componentDidUpdate() {\n            this._checkAndRedirect();\n        }\n\n        _checkAndRedirect() {\n            if (this.state.authState === \"loading\") {\n                Auth.currentAuthenticatedUser().then(user => {\n                    this.props.auth(user);\n                    this.setState({authState: 'valid'});\n                }).catch(e => {\n                    this.setState({authState: 'invalid'});\n                    this.props.redirect();\n                });\n            }\n        }\n\n        render() {\n            return this.state.authState === 'valid' ?\n                <ComposedComponent {...this.props} /> : <UnauthedComponent {...this.props}/>;\n        }\n    }\n\n    const mapStateToProps = (state) => {\n        return {\n            auth: state.auth\n        };\n    };\n\n    const mapDispatchToProps = (dispatch) => {\n        return {\n            redirect: () => dispatch(() => {history.push(\"/login\")}),\n            auth: (user) => dispatch(AuthAction.auth(user))\n        }\n    };\n\n    return connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(Authenticate);\n}\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nconst styles = (theme) => ({\n    '@global': {\n        body: {\n            ...theme.typography.body1,\n            margin: 0\n        },\n        h6: {\n            color: theme.palette.primary.main,\n            fontWeight: \"normal\"\n        }\n    }\n});\n\nexport default styles;","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React, {Component} from 'react';\nimport {\n    Switch,\n    Route,\n    Redirect,\n    Router\n} from 'react-router-dom';\nimport {withStyles} from \"@material-ui/core\";\nimport Amplify from 'aws-amplify';\n\nimport history from \"./history\";\nimport CognitoAuth from './auth/CognitoAuth';\nimport Contacts from \"./agents/Agents\";\nimport globalStyles from './theme/global.styles';\n\nAmplify.configure({\n    Auth: {\n        region: process.env.REACT_APP_REGION,\n        userPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n        userPoolWebClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\n        oauth: {\n            domain: process.env.REACT_APP_COGNITO_DOMAIN,\n            scope: ['profile', 'openid'],\n            redirectSignIn: process.env.REACT_APP_COGNITO_REDIRECT,\n            redirectSignOut: process.env.REACT_APP_COGNITO_REDIRECT,\n            responseType: 'code'\n        }\n    }\n});\n\nclass App extends Component {\n    render() {\n        return (\n            <Router history={history}>\n                <Switch>\n                    <Route exact path=\"/login\" component={CognitoAuth}/>\n                    <Route path=\"/agents\" component={Contacts}/>\n                    <Route exact path=\"/\" component={CognitoAuth}/>\n                    <Redirect from=\"/*\" exact to=\"/agents\" />\n                </Switch>\n            </Router>\n        )\n    }\n}\n\nexport default withStyles(globalStyles)(App);","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/******************************************************************************\n *  Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.                                           *                                                                                                                   *\n *  Licensed under the Apache License Version 2.0 (the 'License'). You may not\n *  use this file except in compliance with the License. A copy of the License\n *  is located at                                                            \n *                                                                                                                   \n *      http://www.apache.org/licenses/                                                                                   *                                                                                                                  \n *  or in the 'license' file accompanying this file. This file is distributed on\n *  an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n *  implied. See the License for the specific language governing permissions and\n *  limitations under the License.                                                                                \n******************************************************************************/\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport rootReducer from './store/reducer';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport materialTheme from \"./theme/material.theme\";\n\nimport logger from \"./common/logger\";\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__: any\n  }\n}\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\n\n// If you want to enable logging for Redux, use the store below which includes the logger\n// const store = createStore(rootReducer, composeEnhancers(applyMiddleware(logger, thunk)));\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <MuiThemeProvider theme={materialTheme}>\n      <App />\n    </MuiThemeProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}